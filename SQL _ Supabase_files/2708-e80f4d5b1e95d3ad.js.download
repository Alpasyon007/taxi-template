"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2708],{34800:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(56626);let o=(0,r.Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},30203:function(e,n,t){t.d(n,{z:function(){return _}});var r=t(95235),o=t(20406),i=t(82269),c=t(28526),a=t.n(c),s=t(39097),l=t.n(s),u=t(5632),d=t(2784),p=t(8647),f=t(77740),h=t(93306),b=t(29027),v=t(25149),g=t(77426),m=t(36849),j=t(10209),x=t(13734),y=t(65041),w=t(70203),O=t(52322),P=["disabled","onDeleteConnection"];function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var _=(0,d.forwardRef)(function(e,n){var t=e.disabled,c=e.onDeleteConnection,s=(0,i.Z)(e,P),_=(0,w.oR)().ui,k=(0,d.useState)(!1),N=k[0],E=k[1],C=(0,d.useState)(!1),Z=C[0],D=C[1],R=(0,u.useRouter)(),I=(0,d.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(s.connection);case 3:return e.prev=3,E(!1),e.finish(3);case 6:case"end":return e.stop()}},e,null,[[0,,3,6]])})),[s.connection,c]),V=(0,d.useCallback)(function(){E(!1)},[]),L=(0,y.h)({onSuccess:function(){_.setNotification({category:"success",message:"Successfully synced environment variables"}),D(!1)}}),U=L.mutate,z=L.isLoading,A=(0,d.useCallback)((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:U({connectionId:s.connection.id});case 1:case"end":return e.stop()}},e)})),[s.connection,U]),B="/project/[ref]/settings/integrations";return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(j.jA,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({actions:t?(0,O.jsx)(p.z,{asChild:!0,disabled:!0,iconRight:(0,O.jsx)(f.Z,{}),type:"default",children:(0,O.jsx)("span",{children:"Manage"})}):(0,O.jsxs)(h.h_,{open:Z,onOpenChange:function(){return D(!Z)},modal:!1,children:[(0,O.jsx)(h.$F,{children:(0,O.jsx)(p.z,{asChild:!0,iconRight:(0,O.jsx)(f.Z,{}),type:"default",children:(0,O.jsx)("span",{children:"Manage"})})}),(0,O.jsxs)(h.AW,{side:"bottom",align:"end",children:["Vercel"===s.type&&(0,O.jsxs)(O.Fragment,{children:[R.pathname!==B&&(0,O.jsx)(h.Xi,{disabled:z,asChild:!0,children:(0,O.jsx)(l(),{href:B.replace("[ref]",s.connection.supabase_project_ref),children:"View project configuration"})}),(0,O.jsxs)(h.Xi,{className:"space-x-2",onSelect:function(e){e.preventDefault(),A()},disabled:z,children:[z?(0,O.jsx)(b.Z,{className:"animate-spin",size:14}):(0,O.jsx)(v.Z,{size:14}),(0,O.jsx)("p",{children:"Resync environment variables"})]}),(0,O.jsx)(h.VD,{})]}),(0,O.jsxs)(h.Xi,{className:"space-x-2",onSelect:function(){return E(!0)},children:[(0,O.jsx)(g.Z,{size:14}),(0,O.jsx)("p",{children:"Delete connection"})]})]})]})},s)),(0,O.jsx)(x.Z,{visible:N,danger:!0,header:"Confirm to delete",buttonLabel:"Delete",onSelectCancel:V,onSelectConfirm:I,children:(0,O.jsx)(m.C.Content,{children:(0,O.jsx)("p",{className:"py-4 text-sm text-foreground-light",children:"This action cannot be undone. Are you sure you want to delete this connection?"})})})]})});_.displayName="IntegrationConnectionItem"},2500:function(e,n,t){t.d(n,{g:function(){return r}});var r=Object.values({POSTGRES_URL:{key:"POSTGRES_URL",type:"encrypted"},POSTGRES_PRISMA_URL:{key:"POSTGRES_PRISMA_URL",type:"encrypted"},POSTGRES_URL_NON_POOLING:{key:"POSTGRES_URL_NON_POOLING",type:"encrypted"},POSTGRES_USER:{key:"POSTGRES_USER",type:"encrypted"},POSTGRES_HOST:{key:"POSTGRES_HOST",type:"encrypted"},POSTGRES_PASSWORD:{key:"POSTGRES_PASSWORD",type:"encrypted"},POSTGRES_DATABASE:{key:"POSTGRES_DATABASE",type:"encrypted"},SUPABASE_ANON_KEY:{key:"SUPABASE_ANON_KEY",type:"encrypted"},SUPABASE_URL:{key:"SUPABASE_URL",type:"encrypted"},SUPABASE_SERVICE_ROLE_KEY:{key:"SUPABASE_SERVICE_ROLE_KEY",type:"encrypted"},NEXT_PUBLIC_SUPABASE_ANON_KEY:{key:"NEXT_PUBLIC_SUPABASE_ANON_KEY",type:"encrypted"},NEXT_PUBLIC_SUPABASE_URL:{key:"NEXT_PUBLIC_SUPABASE_URL",type:"encrypted"}}).map(function(e){return e.key})},22517:function(e,n,t){var r=t(95235),o=t(20406),i=t(28526),c=t.n(i),a=t(76635),s=t(2784),l=t(2500),u=t(36045),d=t(25825),p=t(90611),f=t(87875),h=t(12733),b=t(58662),v=t(29298),g=t(70203),m=t(9747),j=t(84485),x=t(59485),y=t(24888),w=t(52322);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var S=(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 512 512",className:"w-6",children:(0,w.jsx)("path",{"fill-rule":"evenodd",d:"M256,48,496,464H16Z"})});n.Z=function(){var e=(0,g.oR)().ui,n=(0,g.lL)(),t=(0,x.x5)(),r=t.vercelConnectionsIntegrationId,i=(0,f.T)({orgSlug:null==n?void 0:n.slug}).data,O=null==i?void 0:i.filter(function(e){return"Vercel"===e.integration.name}),_=null==O?void 0:O.find(function(e){return e.id===r}),k=(0,v.Sy)({enabled:void 0!==r}).data,N=(0,s.useMemo)(function(){var e;return null!==(e=null==k?void 0:k.filter(function(e){return e.organization_id===(null==n?void 0:n.id)}).map(function(e){return{id:e.id.toString(),name:e.name,ref:e.ref}}))&&void 0!==e?e:j.Z6},[null==n?void 0:n.id,k]),E=(0,b.t)({organization_integration_id:r},{enabled:void 0!==r}).data,C=(0,s.useMemo)(function(){return null!=E?E:j.Z6},[E]),Z=(0,s.useMemo)(function(){return(0,a.keyBy)(C,"id")},[C]),D=(0,s.useCallback)(function(e){var n=Z[e.id];return null!=n&&n.framework?(0,w.jsx)("img",{src:"".concat(m.GW,"/img/icons/frameworks/").concat(n.framework,".svg"),width:21,height:21,alt:"icon"}):p.B},[Z]),R=(0,h.K)({onSuccess:function(n){return(0,o.Z)(c().mark(function r(){var o;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(o=n.env_sync_error)&&e.setNotification({category:"error",message:"Failed to sync environment variables: ".concat(o.message),description:"Please try re-syncing manually from settings."}),t.setVercelConnectionsOpen(!1);case 3:case"end":return r.stop()}},r)}))()}}),I=R.mutate,V=R.isLoading,L=(0,s.useCallback)(function(e){I(P(P({},e),{},{connection:P(P({},e.connection),{},{metadata:P(P({},e.connection.metadata),{},{supabaseConfig:{projectEnvVars:{write:!0}}})})}))},[I]);return(0,w.jsx)(y.ZP,{header:"Add new Vercel Project Connection",size:"large",visible:t.vercelConnectionsOpen,hideFooter:!0,onCancel:function(){return t.setVercelConnectionsOpen(!1)},children:(0,w.jsxs)("div",{className:"py-10 flex flex-col gap-6 bg-background h-full",children:[(0,w.jsx)(y.ZP.Content,{children:(0,w.jsx)(d.U,{content:"\n### Choose repository to connect to\n\nCheck the details below before proceeding\n          "})}),(0,w.jsxs)(y.ZP.Content,{className:"flex flex-col gap-2",children:[(0,w.jsx)(u.Z,{organizationIntegrationId:null==_?void 0:_.id,foreignProjects:C,supabaseProjects:N,onCreateConnections:L,installedConnections:null==_?void 0:_.connections,isLoading:V,integrationIcon:S,getForeignProjectIcon:D,choosePrompt:"Choose Vercel Project"}),(0,w.jsx)(d.U,{content:"\nThe following environment variables will be added:\n\n".concat(l.g.map(function(e){return"\n - `".concat(e,"`")}),"\n")})]}),(0,w.jsx)(y.ZP.Content,{children:(0,w.jsx)("ul",{children:(0,w.jsx)("li",{className:"border px-10"})})})]})})}},94730:function(e,n,t){t.d(n,{B:function(){return eh},Z:function(){return eb}});var r=t(39097),o=t.n(r),i=t(25208),c=t(23733),a=t(46920),s=t(22517),l=t(86866),u=t(70203),d=t(9747),p=t(20406),f=t(28526),h=t.n(f),b=t(43991),v=t(2784),g=t(30203),m=t(10209),j=t(25825),x=t(74715),y=t(87875),w=t(210),O=t(95235),P=t(81333),S=t(88883),_=t(56626);let k=(0,_.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]);var N=t(34800);let E=(0,_.Z)("RotateCcw",[["path",{d:"M3 2v6h6",key:"18ldww"}],["path",{d:"M3 13a9 9 0 1 0 3-7.7L3 8",key:"aahkch"}]]);var C=t(63955),Z=t(40486),D=t(82654),R=t(8647),I=t(15659),V=t(77740),L=t(15742),U=t(97346),z=t(16473),A=t(50077),B=t(30195),T=t(82269),F=t(55830),G=t(62350),W=t(62202),M=t(81229),X=t(6464),H=["onSuccess","onError"];function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Q(){return(Q=(0,p.Z)(h().mark(function e(n){var t,r,o,i,c,a;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,r=n.branchName,o=n.gitBranch,e.next=3,(0,M.r$)("/v1/branches/{branch_id}",{params:{path:{branch_id:t}},body:{branch_name:r,git_branch:o}});case 3:if(c=(i=e.sent).data,!(a=i.error)){e.next=8;break}throw a;case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onSuccess,t=e.onError,r=(0,T.Z)(e,H),o=(0,F.NL)();return(0,G.D)(function(e){return function(e){return Q.apply(this,arguments)}(e)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach(function(n){(0,O.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({onSuccess:function(e,t,r){return(0,p.Z)(h().mark(function i(){var c;return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c=t.projectRef,i.next=3,o.invalidateQueries(X.x.list(c));case 3:return i.next=5,null==n?void 0:n(e,t,r);case 5:case"end":return i.stop()}},i)}))()},onError:function(e,n,r){return(0,p.Z)(h().mark(function o(){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:void 0===t?W.Am.error("Failed to update branch: ".concat(e.message)):t(e,n,r);case 1:case"end":return o.stop()}},o)}))()}},r))},K=t(10896),$=t(94347),J=["onSuccess","onError"];function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function en(){return(en=(0,p.Z)(h().mark(function e(n){var t,r,o,i,c;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,r=n.metadata,n.organizationIntegrationId,e.next=3,(0,M.r$)("/platform/integrations/github/connections/{connection_id}",{params:{path:{connection_id:t}},body:{metadata:r}});case 3:if(i=(o=e.sent).data,!(c=o.error)){e.next=8;break}throw c;case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onSuccess,t=e.onError,r=(0,T.Z)(e,J),o=(0,F.NL)();return(0,G.D)(function(e){return function(e){return en.apply(this,arguments)}(e)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach(function(n){(0,O.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({onSuccess:function(e,t,r){return(0,p.Z)(h().mark(function i(){return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([o.invalidateQueries($.F.githubConnectionsList(t.organizationIntegrationId))]);case 2:return i.next=4,null==n?void 0:n(e,t,r);case 4:case"end":return i.stop()}},i)}))()},onError:function(e,n,r){return(0,p.Z)(h().mark(function o(){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:void 0===t?W.Am.error("Failed to update Github connection: ".concat(e.message)):t(e,n,r);case 1:case"end":return o.stop()}},o)}))()}},r))},er=t(58943),eo=["enabled"];function ei(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ec(){return(ec=(0,p.Z)(h().mark(function e(n,t){var r,o,i,c,a,s;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.organizationIntegrationId,o=n.repoOwner,i=n.repoName,r){e.next=3;break}throw Error("Organization integration ID is required");case 3:return e.next=5,(0,M.U2)("/platform/integrations/github/branches/{organization_integration_id}/{repo_owner}/{repo_name}",{params:{path:{organization_integration_id:r,repo_owner:o,repo_name:i}},signal:t});case 5:if(a=(c=e.sent).data,!(s=c.error)){e.next=10;break}throw s;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ea=function(e){var n=e.organizationIntegrationId,t=e.repoOwner,r=e.repoName,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.enabled,c=(0,T.Z)(o,eo);return(0,er.a)($.F.githubBranchesList(n,t,r),function(e){return function(e,n){return ec.apply(this,arguments)}({organizationIntegrationId:n,repoOwner:t,repoName:r},e.signal)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ei(Object(t),!0).forEach(function(n){(0,O.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ei(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({enabled:(void 0===i||i)&&void 0!==n&&void 0!==t&&void 0!==r},c))},es=t(52322);function el(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eu(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?el(Object(t),!0).forEach(function(n){(0,O.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):el(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ed=function(e){var n,t,r,o,c,a,s,l=e.connection,d=e.integration,p=(0,u.oR)().ui,f=(0,u.Vm)(),h=(0,v.useState)(!1),b=h[0],g=h[1],m=(0,v.useRef)(null),j=null==d?void 0:d.connections.find(function(e){return e.supabase_project_ref===(null==f?void 0:f.parentRef)}),x=null!==(n=null==j?void 0:j.metadata.name.split("/"))&&void 0!==n?n:[],y=(0,P.Z)(x,2),w=y[0],O=y[1],_=ea({organizationIntegrationId:null==d?void 0:d.id,repoOwner:w,repoName:O}),T=_.data,F=(_.error,_.isLoading);_.isSuccess;var G=q({onSuccess:function(e){p.setNotification({category:"success",message:"Changed Production Branch to ".concat(e.git_branch)}),g(!1)}}),W=G.mutate,M=G.isLoading,X=(0,K.V)({projectRef:null==f?void 0:f.parentRef},{enabled:void 0!==f}),H=X.data;X.isLoading;var Y=null==H?void 0:H.find(function(e){return e.is_default}),Q=B.Ry({supabaseDirectory:B.Z_().default(null!==(t=null===(r=l.metadata)||void 0===r?void 0:null===(o=r.supabaseConfig)||void 0===o?void 0:o.supabaseDirectory)&&void 0!==t?t:"")}),$=(0,C.cI)({resolver:(0,S.F)(Q),defaultValues:{supabaseDirectory:null==l?void 0:null===(c=l.metadata)||void 0===c?void 0:null===(a=c.supabaseConfig)||void 0===a?void 0:a.supabaseDirectory}}),J=et({onSuccess:function(){p.setNotification({category:"success",message:"Updated Supabase directory"}),g(!1)}}),ee=J.mutate,en=J.isLoading;return(0,es.jsxs)("div",{className:"flex flex-col gap-6 px-8 py-8",children:[(0,es.jsxs)("div",{children:[(0,es.jsx)(Z._,{className:"text-foreground",children:"Production branch"}),(0,es.jsx)("p",{className:"text-xs text-foreground-light mb-3",children:"All other branches will be treated as Preview branches"}),(0,es.jsxs)(i.bZ,{className:"mb-4 w-96",children:[(0,es.jsx)(i.Cd,{className:"text-sm",children:"Changing Git branch for Production Branch coming soon"}),(0,es.jsx)(i.X,{className:"text-xs",children:"If you wish to change the Git branch that is used for the Production Branch you will need to disable Branching and opt back in."})]}),(0,es.jsxs)(D.J2,{open:b,onOpenChange:g,modal:!1,children:[(0,es.jsx)(D.xo,{asChild:!0,name:"branch-selector",children:(0,es.jsx)(R.z,{disabled:!0,type:"default",size:"medium",ref:m,className:(0,I.cn)("justify-start w-64",(null==Y?void 0:Y.git_branch)===void 0?"text-foreground-light":"text"),icon:(null==Y?void 0:Y.git_branch)&&(0,es.jsx)(k,{className:"w-4 h-4 text-warning",strokeWidth:1}),loading:M||F,iconRight:(0,es.jsx)("span",{className:"grow flex justify-end",children:(0,es.jsx)(V.Z,{className:""})}),children:(null==Y?void 0:Y.git_branch)||"Select a branch"})}),(0,es.jsx)(D.yk,{className:"p-0",side:"bottom",align:"start",style:{width:null===(s=m.current)||void 0===s?void 0:s.offsetWidth},children:(0,es.jsxs)(L.mY,{children:[(0,es.jsx)(L.sZ,{placeholder:"Find branch..."}),(0,es.jsxs)(L.e8,{children:[(0,es.jsx)(L.rb,{children:"No branches found"}),(0,es.jsx)(L.fu,{children:null==T?void 0:T.map(function(e){var n=e.name===(null==Y?void 0:Y.git_branch);return(0,es.jsxs)(L.di,{value:e.name,className:"cursor-pointer w-full flex items-center justify-between",onSelect:function(){var n;g(!1),n=e.name,null!=f&&f.parentRef&&Y&&W({id:Y.id,projectRef:f.parentRef,branchName:n,gitBranch:n})},children:[(0,es.jsxs)("div",{className:"flex items-center gap-2",children:[n?(0,es.jsx)(k,{className:"w-4 h-4 text-warning",strokeWidth:1}):(0,es.jsx)(N.Z,{className:"w-4 h-4",strokeWidth:1}),e.name]}),e.name===(null==Y?void 0:Y.git_branch)&&(0,es.jsx)(U.Z,{})]},e.name)})})]})]})})]})]}),(0,es.jsx)(z.l0,eu(eu({},$),{},{children:(0,es.jsxs)("form",{onSubmit:$.handleSubmit(function(e){var n,t=eu(eu({},l.metadata),{},{supabaseConfig:eu(eu({},null===(n=l.metadata)||void 0===n?void 0:n.supabaseConfig),{},{supabaseDirectory:e.supabaseDirectory})});ee({id:l.id,metadata:t,organizationIntegrationId:d.id})}),children:[(0,es.jsx)(z.lX,{className:"!text",children:"Supabase directory"}),(0,es.jsx)(z.pf,{className:"text-xs text-foreground-lighter mb-3",children:"Migration and seed SQL files will be run from this directory."}),(0,es.jsxs)(i.bZ,{className:"mb-4 w-96",children:[(0,es.jsx)(i.Cd,{className:"text-sm",children:"Changing Supabase directory is currently not supported"}),(0,es.jsx)(i.X,{className:"text-xs",children:"You will need to disable Branching and opt back into Branching to change the Production Branch. your Git repository."})]}),(0,es.jsx)(z.Wi,{control:$.control,name:"supabaseDirectory",render:function(e){var n,t,r,o,i,c,a=e.field;return(0,es.jsxs)(z.xJ,{className:"flex flex-row items-center gap-3 !space-y-0",children:[(0,es.jsx)(z.NI,{className:"xl:w-96",children:(0,es.jsxs)("div",{className:"relative",children:[(0,es.jsx)(A.I,eu(eu({disabled:!0},a),{},{onKeyPress:function(e){"Escape"===e.key&&$.reset()}})),(0,es.jsx)(E,{className:(0,I.cn)("text-foreground-lighter transition hover:text cursor-pointer","w-4 h-4 absolute right-3 top-3","duration-150",en||a.value!==(null===(n=l.metadata)||void 0===n?void 0:null===(t=n.supabaseConfig)||void 0===t?void 0:t.supabaseDirectory)?"opacity-100 transition":"opacity-0"),onClick:function(){return $.reset()}})]})}),(0,es.jsx)(R.z,{className:(0,I.cn)("duration-150",en||a.value!==(null===(r=l.metadata)||void 0===r?void 0:null===(o=r.supabaseConfig)||void 0===o?void 0:o.supabaseDirectory)?"opacity-100 transition":"opacity-0"),htmlType:"submit",type:"secondary",size:"medium",loading:en,disabled:a.value===(null===(i=l.metadata)||void 0===i?void 0:null===(c=i.supabaseConfig)||void 0===c?void 0:c.supabaseDirectory)||en,children:"Update"})]})}})]})}))]})},ep=function(){var e,n=(0,u.oR)().ui,t=(0,u.Vm)(),r=(0,u.lL)(),o=(0,y.T)({orgSlug:null==r?void 0:r.slug}).data,i=(0,b.UO)().ref,c=(null==t?void 0:t.parent_project_ref)!==void 0,a=null==o?void 0:o.filter(function(e){return"GitHub"===e.integration.name}),s=(0,x.A)({onSuccess:function(){n.setNotification({category:"success",message:"Successfully deleted Github connection"})}}).mutate,d=(0,v.useCallback)((e=(0,p.Z)(h().mark(function e(n){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s({connectionId:n.id,integrationId:n.organization_integration_id,orgSlug:null==r?void 0:r.slug});case 1:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)}),[s,null==r?void 0:r.slug]);return(0,es.jsx)(l._S,{children:(0,es.jsxs)(l.jX,{children:[(0,es.jsxs)(l.g$,{title:"GitHub Connections",children:[(0,es.jsx)(j.U,{content:"\nConnect any of your GitHub repositories to a project.\n"}),(0,es.jsx)(eh,{title:"github"})]}),(0,es.jsxs)(l.Lc,{children:[(0,es.jsx)(j.U,{content:"\n\n### How will GitHub connections work?\n\nYou will be able to connect a GitHub repository to a Supabase project.\nThe GitHub app will watch for changes in your repository such as file changes, branch changes as well as pull request activity.\n\nThese connections will be part of a GitHub workflow that is currently in development.\n"}),a&&a.length>0&&a.map(function(e,n){var r=e.connections.filter(function(e){return c?e.supabase_project_ref===t.parent_project_ref:e.supabase_project_ref===i});return(0,es.jsxs)("div",{children:[(0,es.jsx)(m.ML,{title:"GitHub",integration:e,disabled:c}),r.length>0?(0,es.jsxs)(es.Fragment,{children:[(0,es.jsx)(m.WY,{}),(0,es.jsx)("ul",{className:"flex flex-col",children:r.map(function(n){return(0,es.jsxs)("div",{className:"relative flex flex-col -gap-[1px] [&>li]:pb-0",children:[(0,es.jsx)(g.z,{showNode:!1,disabled:c,connection:n,type:"GitHub",onDeleteConnection:d,className:"!rounded-b-none !mb-0"},n.id),(0,es.jsx)("div",{className:"border-b border-l border-r rounded-b-lg",children:(0,es.jsx)(ed,{connection:n,integration:e})})]},n.id)})})]}):(0,es.jsx)(m.WY,{markdown:"### ".concat(r.length," project ").concat((0,w._6)(r.length,"connection")," Repository connections for GitHub")})]},e.id)})]})]})})},ef=t(83933),eh=function(e){var n=e.title;return(0,es.jsx)("img",{className:"border rounded-lg shadow w-48 mt-6 border-body",src:"".concat(d.GW,"/img/integrations/covers/").concat(n,"-cover.png"),alt:"".concat(n," cover")})},eb=function(){var e=(0,u.Vm)(),n=(0,u.N$)(null==e?void 0:e.parent_project_ref),t=(null==e?void 0:e.parent_project_ref)!==void 0;return(0,es.jsxs)(es.Fragment,{children:[t&&(0,es.jsx)(l._S,{children:(0,es.jsxs)(i.bZ,{variant:"default",className:"mt-6",children:[(0,es.jsx)(c.Z,{strokeWidth:2}),(0,es.jsx)(i.Cd,{children:"You are currently on a preview branch of your project"}),(0,es.jsxs)(i.X,{children:["To adjust your project's integration settings, you may return to your"," ",(0,es.jsx)(o(),{href:"/project/".concat(null==n?void 0:n.ref,"/settings/general"),className:"text-brand",children:"main branch"}),"."]})]})}),(0,es.jsx)(ep,{}),(0,es.jsx)(l.I7,{}),(0,es.jsx)(ef.Z,{isProjectScoped:!0}),(0,es.jsx)(s.Z,{}),(0,es.jsx)(a.Z,{})]})}},83933:function(e,n,t){t.d(n,{Z:function(){return eg}});var r=t(20406),o=t(28526),i=t.n(o),c=t(39097),a=t.n(c),s=t(2784),l=t(8647),u=t(95223),d=t(30203),p=t(10209),f=t(25825),h=t(86866),b=t(87875),v=t(95235),g=t(82269),m=t(55830),j=t(62350),x=t(37552),y=t(9747),w=t(94347),O=t(62202),P=["onSuccess","onError"];function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function _(){return(_=(0,r.Z)(i().mark(function e(n,t){var r,o,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.organization_integration_id,o=n.id,r){e.next=3;break}throw Error("organization_integration_id is required");case 3:return e.next=5,(0,x.$v)("".concat(y.T5,"/integrations/vercel/connections/").concat(o),{organization_integration_id:r},{signal:t});case 5:if(c=e.sent,(0,x.d8)(c)){e.next=8;break}throw c.error;case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onSuccess,t=e.onError,o=(0,g.Z)(e,P),c=(0,m.NL)();return(0,j.D)(function(e){return function(e,n){return _.apply(this,arguments)}(e)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach(function(n){(0,v.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({onSuccess:function(e,t,o){return(0,r.Z)(i().mark(function r(){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([c.invalidateQueries(w.F.integrationsList()),c.invalidateQueries(w.F.integrationsListWithOrg(t.orgSlug)),c.invalidateQueries(w.F.vercelProjectList(t.organization_integration_id)),c.invalidateQueries(w.F.vercelConnectionsList(t.organization_integration_id))]);case 2:return r.next=4,null==n?void 0:n(e,t,o);case 4:case"end":return r.stop()}},r)}))()},onError:function(e,n,o){return(0,r.Z)(i().mark(function r(){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:void 0===t?O.Am.error("Failed to delete Vercel connection: ".concat(e.message)):t(e,n,o);case 1:case"end":return r.stop()}},r)}))()}},o))},N=t(58662),E=t(70203),C=t(210),Z=t(91516),D=t(59485),R=t(94730),I=t(88883),V=t(63955),L=t(16473),U=t(25208),z=t(80717),A=t(15659),B=t(7896),T=t(17998),F=t(62656),G=t(92211),W=t(87695),M=t(35019),X=t(72714);let H="Switch",[Y,Q]=(0,G.b)(H),[q,K]=Y(H),$=(0,s.forwardRef)((e,n)=>{let{__scopeSwitch:t,name:r,checked:o,defaultChecked:i,required:c,disabled:a,value:l="on",onCheckedChange:u,...d}=e,[p,f]=(0,s.useState)(null),h=(0,F.e)(n,e=>f(e)),b=(0,s.useRef)(!1),v=!p||!!p.closest("form"),[g=!1,m]=(0,W.T)({prop:o,defaultProp:i,onChange:u});return(0,s.createElement)(q,{scope:t,checked:g,disabled:a},(0,s.createElement)(X.WV.button,(0,B.Z)({type:"button",role:"switch","aria-checked":g,"aria-required":c,"data-state":en(g),"data-disabled":a?"":void 0,disabled:a,value:l},d,{ref:h,onClick:(0,T.M)(e.onClick,e=>{m(e=>!e),v&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})),v&&(0,s.createElement)(ee,{control:p,bubbles:!b.current,name:r,value:l,checked:g,required:c,disabled:a,style:{transform:"translateX(-100%)"}}))}),J=(0,s.forwardRef)((e,n)=>{let{__scopeSwitch:t,...r}=e,o=K("SwitchThumb",t);return(0,s.createElement)(X.WV.span,(0,B.Z)({"data-state":en(o.checked),"data-disabled":o.disabled?"":void 0},r,{ref:n}))}),ee=e=>{let{control:n,checked:t,bubbles:r=!0,...o}=e,i=(0,s.useRef)(null),c=function(e){let n=(0,s.useRef)({value:e,previous:e});return(0,s.useMemo)(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}(t),a=(0,M.t)(n);return(0,s.useEffect)(()=>{let e=i.current,n=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(n,"checked"),a=o.set;if(c!==t&&a){let n=new Event("click",{bubbles:r});a.call(e,t),e.dispatchEvent(n)}},[c,t,r]),(0,s.createElement)("input",(0,B.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:t},o,{tabIndex:-1,ref:i,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function en(e){return e?"checked":"unchecked"}var et=t(52322),er=["className"];function eo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ei(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eo(Object(t),!0).forEach(function(n){(0,v.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ec=s.forwardRef(function(e,n){var t=e.className,r=(0,g.Z)(e,er);return(0,et.jsx)($,ei(ei({className:(0,A.cn)("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",t)},r),{},{ref:n,children:(0,et.jsx)(J,{className:(0,A.cn)("pointer-events-none block h-[18px] w-[18px] rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]")})}))});ec.displayName=$.displayName;var ea=t(30195),es=t(81229),el=["onSuccess","onError"];function eu(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ed(){return(ed=(0,r.Z)(i().mark(function e(n){var t,r,o,c,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,r=n.metadata,n.organizationIntegrationId,e.next=3,(0,es.r$)("/platform/integrations/vercel/connections/{connection_id}",{params:{path:{connection_id:t}},body:{metadata:r}});case 3:if(c=(o=e.sent).data,!(a=o.error)){e.next=8;break}throw a;case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onSuccess,t=e.onError,o=(0,g.Z)(e,el),c=(0,m.NL)();return(0,j.D)(function(e){return function(e){return ed.apply(this,arguments)}(e)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eu(Object(t),!0).forEach(function(n){(0,v.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({onSuccess:function(e,t,o){return(0,r.Z)(i().mark(function r(){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([c.invalidateQueries(w.F.vercelConnectionsList(t.organizationIntegrationId))]);case 2:return r.next=4,null==n?void 0:n(e,t,o);case 4:case"end":return r.stop()}},r)}))()},onError:function(e,n,o){return(0,r.Z)(i().mark(function r(){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:void 0===t?O.Am.error("Failed to update Vercel connection: ".concat(e.message)):t(e,n,o);case 1:case"end":return r.stop()}},r)}))()}},o))};function ef(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eh(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ef(Object(t),!0).forEach(function(n){(0,v.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ef(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eb=function(e){var n,t,r,o,i,c,a,s,l,u,d,p,f,b,v,g,m=e.connection,j=e.integration,x=(0,E.P5)("enableVercelConnectionsConfig"),y=(0,E.oR)().ui,w=m.metadata.supabaseConfig,O=ea.Ry({environmentVariablesProduction:ea.O7().default(null===(n=null==w?void 0:null===(t=w.environmentVariables)||void 0===t?void 0:t.production)||void 0===n||n),authRedirectUrisProduction:ea.O7().default(null===(r=null==w?void 0:null===(o=w.authRedirectUris)||void 0===o?void 0:o.production)||void 0===r||r),environmentVariablesPreview:ea.O7().default(null===(i=null==w?void 0:null===(c=w.environmentVariables)||void 0===c?void 0:c.preview)||void 0===i||i),authRedirectUrisPreview:ea.O7().default(null===(a=null==w?void 0:null===(s=w.authRedirectUris)||void 0===s?void 0:s.preview)||void 0===a||a)}),P=(0,V.cI)({resolver:(0,I.F)(O),defaultValues:{environmentVariablesProduction:null===(l=null==w?void 0:null===(u=w.environmentVariables)||void 0===u?void 0:u.production)||void 0===l||l,environmentVariablesPreview:null===(d=null==w?void 0:null===(p=w.environmentVariables)||void 0===p?void 0:p.preview)||void 0===d||d,authRedirectUrisProduction:null===(f=null==w?void 0:null===(b=w.authRedirectUris)||void 0===b?void 0:b.production)||void 0===f||f,authRedirectUrisPreview:null===(v=null==w?void 0:null===(g=w.authRedirectUris)||void 0===g?void 0:g.preview)||void 0===v||v}}),S=ep({onSuccess:function(e){y.setNotification({category:"success",message:"Updated Supabase directory"})}}),_=S.mutate;function k(e){if(x){var n=eh({},m.metadata);n.supabaseConfig={environmentVariables:{production:e.environmentVariablesProduction,preview:e.environmentVariablesPreview},authRedirectUris:{production:e.authRedirectUrisProduction,preview:e.authRedirectUrisPreview}},_({id:m.id,metadata:n,organizationIntegrationId:j.id})}}return S.isLoading,(0,et.jsxs)(L.l0,eh(eh({},P),{},{children:[(0,et.jsx)("div",{className:"py-4 px-8",children:(0,et.jsxs)(U.bZ,{variant:"default",className:"",children:[(0,et.jsx)(z.Z,{className:"h-4 w-4",strokeWidth:2}),(0,et.jsx)(U.Cd,{children:"Vercel Connection configuration coming soon"}),(0,et.jsx)(U.X,{children:"This configuration will allow you to control the environment variables and auth redirects for production and preview deployments."})]})}),(0,et.jsx)(h.I7,{}),(0,et.jsx)("form",{onSubmit:P.handleSubmit(k),className:(0,A.cn)(!x&&"opacity-30","w-full space-y-6"),children:(0,et.jsxs)("div",{children:[(0,et.jsxs)("div",{className:"flex flex-col gap-6 px-8 py-8",children:[(0,et.jsx)("h5",{className:"text-foreground text-sm",children:"Vercel Production deployments "}),(0,et.jsx)(L.Wi,{control:P.control,name:"environmentVariablesProduction",render:function(e){var n=e.field;return(0,et.jsxs)(L.xJ,{className:"flex flex-row items-center justify-between",children:[(0,et.jsxs)("div",{className:"",children:[(0,et.jsx)(L.lX,{className:"!text",children:"Sync environment variables for Vercel Production deployments"}),(0,et.jsx)(L.pf,{className:"text-xs text-foreground-lighter",children:"Deploy Edge Functions when merged into Production Branch"})]}),(0,et.jsx)(L.NI,{children:(0,et.jsx)(ec,{disabled:!x,checked:n.value,onCheckedChange:function(e){n.onChange(e),P.handleSubmit(k)()}})})]})}}),(0,et.jsx)(L.Wi,{control:P.control,name:"authRedirectUrisProduction",render:function(e){var n=e.field;return(0,et.jsxs)(L.xJ,{className:"flex flex-row items-center justify-between",children:[(0,et.jsxs)("div",{className:"",children:[(0,et.jsx)(L.lX,{className:"!text",children:"Auto update Auth Redirect URIs for Vercel Production Deployments"}),(0,et.jsx)(L.pf,{className:"text-xs text-foreground-lighter",children:"Deploy Edge Functions when merged into Production Branch"})]}),(0,et.jsx)(L.NI,{children:(0,et.jsx)(ec,{disabled:!x,checked:n.value,onCheckedChange:function(e){n.onChange(e),P.handleSubmit(k)()}})})]})}})]}),(0,et.jsx)(h.I7,{}),(0,et.jsxs)("div",{className:"flex flex-col gap-6 px-8 py-8",children:[(0,et.jsx)("h5",{className:"text-foreground text-sm",children:"Vercel Preview deployments "}),(0,et.jsx)(L.Wi,{control:P.control,name:"environmentVariablesPreview",render:function(e){var n=e.field;return(0,et.jsxs)(L.xJ,{className:"flex flex-row items-center justify-between",children:[(0,et.jsxs)("div",{className:"",children:[(0,et.jsx)(L.lX,{className:"!text",children:"Sync environment variables for Vercel Preview Deployments"}),(0,et.jsx)(L.pf,{className:"text-xs text-foreground-lighter",children:"Preview deployments will be able to connect to Supabase Database Preview branches"})]}),(0,et.jsx)(L.NI,{children:(0,et.jsx)(ec,{disabled:!x,checked:n.value,onCheckedChange:function(e){n.onChange(e),P.handleSubmit(k)()}})})]})}}),(0,et.jsx)(L.Wi,{control:P.control,name:"authRedirectUrisPreview",render:function(e){var n=e.field;return(0,et.jsxs)(L.xJ,{className:"flex flex-row items-center justify-between",children:[(0,et.jsxs)("div",{className:"",children:[(0,et.jsx)(L.lX,{className:"!text",children:"Auto update Auth Redirect URIs for Vercel Preview Deployments"}),(0,et.jsx)(L.pf,{className:"text-xs text-foreground-lighter",children:"Deploy Edge Functions when merged into Production Branch"})]}),(0,et.jsx)(L.NI,{children:(0,et.jsx)(ec,{disabled:!x,checked:n.value,onCheckedChange:function(e){n.onChange(e),P.handleSubmit(k)()}})})]})}})]})]})})]}))},ev=t(6277),eg=function(e){var n,t,o=e.isProjectScoped,c=(0,E.oR)().ui,v=(0,E.Vm)(),g=(0,E.lL)(),m=(0,b.T)({orgSlug:null==g?void 0:g.slug}).data,j=(0,D.x5)(),x=(null==v?void 0:v.parent_project_ref)!==void 0,y=k({onSuccess:function(){c.setNotification({category:"success",message:"Successfully deleted Vercel connection"})}}).mutate,w=(0,s.useMemo)(function(){return null==m?void 0:m.filter(function(e){return"Vercel"===e.integration.name}).map(function(e){if(e.metadata&&"Vercel"===e.integration.name){var n=e.metadata.account.avatar||"Team"!==e.metadata.account.type?"https://vercel.com/api/www/avatar/".concat(e.metadata.account.avatar,"?s=48"):"https://vercel.com/api/www/avatar?teamId=".concat(e.metadata.account.team_id,"&s=48");e.metadata.account.avatar=n}return e})},[m]),O=null==w?void 0:w[0],P=(0,N.t)({organization_integration_id:null==O?void 0:O.id},{enabled:(null==O?void 0:O.id)!==void 0}).data,S=null!==(t=null==P?void 0:P.length)&&void 0!==t?t:0,_=(0,s.useCallback)(function(e){j.setVercelConnectionsIntegrationId(e),j.setVercelConnectionsOpen(!0)},[j]),I=(0,s.useCallback)((n=(0,r.Z)(i().mark(function e(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y({id:n.id,organization_integration_id:n.organization_integration_id,orgSlug:null==g?void 0:g.slug});case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[y,null==g?void 0:g.slug]),V=S>0&&void 0!==O?"\nYour Vercel connection has access to ".concat(S," Vercel Projects.\nYou can change the scope of the access for Supabase by configuring\n[here](").concat((0,Z.H9)(O),").\n"):"",L=(o?null==O?void 0:O.connections.filter(function(e){return e.supabase_project_ref===(null==v?void 0:v.ref)}):null==O?void 0:O.connections)||[],U="".concat(L.length," project ").concat((0,C._6)(L.length,"connection")," ");return(0,et.jsx)(h._S,{children:(0,et.jsxs)(h.jX,{children:[(0,et.jsxs)(h.g$,{title:"Vercel Integration",children:[(0,et.jsx)(f.U,{content:"\n\nConnect your Vercel teams to your Supabase organization.\n"}),(0,et.jsx)(R.B,{title:"vercel"})]}),(0,et.jsxs)(h.Lc,{children:[(0,et.jsx)(f.U,{content:"\n\n### How does the Vercel integration work?\n\nSupabase will keep your environment variables up to date in each of the projects you assign to a Supabase project.\nYou can also link multiple Vercel Projects to the same Supabase project.\n"}),O?(0,et.jsxs)("div",{children:[(0,et.jsx)(p.ML,{title:"Vercel",integration:O}),L.length>0?(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(p.WY,{title:U,markdown:"Repository connections for Vercel"}),(0,et.jsx)("ul",{className:"flex flex-col",children:L.map(function(e){return(0,et.jsxs)("div",{className:(0,ev.default)(o&&"relative flex flex-col -gap-[1px] [&>li]:pb-0"),children:[(0,et.jsx)(d.z,{connection:e,type:"Vercel",onDeleteConnection:I,className:(0,ev.default)(o&&"!rounded-b-none !mb-0")}),o?(0,et.jsx)("div",{className:"relative pl-8 ml-6 border-l border-muted pb-6",children:(0,et.jsx)("div",{className:"border-b border-l border-r rounded-b-lg",children:(0,et.jsx)(eb,{connection:e,integration:O})})}):null]},e.id)})})]}):(0,et.jsx)(p.WY,{title:U,markdown:"Repository connections for Vercel"}),(0,et.jsx)(p.FP,{onClick:function(){return _(O.id)},orgSlug:null==g?void 0:g.slug,children:"Add new project connection"})]},O.id):(0,et.jsx)("div",{children:(0,et.jsx)(l.z,{asChild:!0,type:"default",disabled:x,iconRight:(0,et.jsx)(u.Z,{}),children:x?(0,et.jsx)("p",{children:"Install Vercel Integration"}):(0,et.jsx)(a(),{href:"https://vercel.com/integrations/supabase-v2",target:"_blank",rel:"noreferrer",children:"Install Vercel Integration"})})}),V&&(0,et.jsx)(f.U,{content:V,className:"text-foreground-lighter"})]})]})})}},90611:function(e,n,t){t.d(n,{B:function(){return i},t:function(){return c}});var r=t(89083),o=t(52322),i=(0,o.jsx)("div",{className:"flex items-center justify-center rounded bg-black p-1",children:(0,o.jsx)("svg",{className:"m-auto fill-current text-white",width:"12px",height:"12px",viewBox:"0 0 1155 1000",children:(0,o.jsx)("path",{d:"M577.344 0L1154.69 1000H0L577.344 0Z"})})}),c=(0,o.jsx)("div",{className:"flex items-center justify-center rounded bg-green-500 p-1 [[data-theme*=dark]_&]:text-typography-body-dark ",children:(0,o.jsx)(r.Z,{size:12,strokeWidth:2})})},65041:function(e,n,t){t.d(n,{h:function(){return h}});var r=t(95235),o=t(82269),i=t(20406),c=t(28526),a=t.n(c),s=t(62350),l=t(62202),u=t(81229),d=["onSuccess","onError"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function f(){return(f=(0,i.Z)(a().mark(function e(n){var t,r,o,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.connectionId,e.next=3,(0,u.v_)("/platform/integrations/vercel/connections/{connection_id}/sync-envs",{params:{path:{connection_id:t}}});case 3:if(o=(r=e.sent).data,!(i=r.error)){e.next=8;break}throw i;case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onSuccess,t=e.onError,c=(0,o.Z)(e,d);return(0,s.D)(function(e){return function(e){return f.apply(this,arguments)}(e)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({onSuccess:function(e,t,r){return(0,i.Z)(a().mark(function o(){return a().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,null==n?void 0:n(e,t,r);case 2:case"end":return o.stop()}},o)}))()},onError:function(e,n,r){return(0,i.Z)(a().mark(function o(){return a().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:void 0===t?l.Am.error("Failed to sync environment variables: ".concat(e.message)):t(e,n,r);case 1:case"end":return o.stop()}},o)}))()}},c))}},12733:function(e,n,t){t.d(n,{K:function(){return g}});var r=t(95235),o=t(82269),i=t(20406),c=t(28526),a=t.n(c),s=t(55830),l=t(62350),u=t(62202),d=t(81229),p=t(94347),f=t(79509),h=["onSuccess","onError"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(){return(v=(0,i.Z)(a().mark(function e(n){var t,r,o,i,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.organizationIntegrationId,r=n.connection,e.next=3,(0,d.v_)("/platform/integrations/vercel/connections",{body:{organization_integration_id:t,connection:{foreign_project_id:r.foreign_project_id,supabase_project_ref:r.supabase_project_ref,metadata:r.metadata}}});case 3:if(i=(o=e.sent).data,!(c=o.error)){e.next=8;break}throw c;case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onSuccess,t=e.onError,c=(0,o.Z)(e,h),d=(0,s.NL)(),g=(0,f.IF)();return(0,l.D)(function(e){return function(e){return v.apply(this,arguments)}(e)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({onSuccess:function(e,t,r){return(0,i.Z)(a().mark(function o(){return a().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all([d.invalidateQueries(p.F.integrationsList()),d.invalidateQueries(p.F.integrationsListWithOrg(t.orgSlug)),d.invalidateQueries(p.F.vercelProjectList(t.organizationIntegrationId)),d.invalidateQueries(p.F.vercelConnectionsList(t.organizationIntegrationId))]);case 2:return o.next=4,null==n?void 0:n(e,t,r);case 4:case"end":return o.stop()}},o)}))()},onError:function(e,n,r){return(0,i.Z)(a().mark(function o(){return a().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:g.setLoading(!1),void 0===t?u.Am.error("Failed to create connection: ".concat(e.message)):t(e,n,r);case 2:case"end":return o.stop()}},o)}))()}},c))}},58662:function(e,n,t){t.d(n,{t:function(){return h}});var r=t(95235),o=t(82269),i=t(20406),c=t(28526),a=t.n(c),s=t(58943),l=t(81229),u=t(94347),d=["enabled"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function f(){return(f=(0,i.Z)(a().mark(function e(n,t){var r,o,i,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.organization_integration_id){e.next=3;break}throw Error("organization_integration_id is required");case 3:return e.next=5,(0,l.U2)("/platform/integrations/vercel/projects/{organization_integration_id}",{params:{path:{organization_integration_id:r},query:{limit:"1000"}},signal:t});case 5:if(i=(o=e.sent).data,!(c=o.error)){e.next=10;break}throw c;case 10:return e.abrupt("return",i.projects);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var h=function(e){var n=e.organization_integration_id,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.enabled,c=(0,o.Z)(t,d);return(0,s.a)(u.F.vercelProjectList(n),function(e){return function(e,n){return f.apply(this,arguments)}({organization_integration_id:n},e.signal)},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({enabled:(void 0===i||i)&&void 0!==n},c))}},79509:function(e,n,t){t.d(n,{IF:function(){return c}});var r=t(9162),o=t(4741),i=(0,r.sj)({loading:!1,setLoading:function(e){i.loading=e}}),c=function(e){return(0,o.R)(i,e)}}}]);