"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3313],{41051:function(e,r,n){n.d(r,{Z:function(){return s}});var i=n(56626);let s=(0,i.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["line",{x1:"12",x2:"12",y1:"9",y2:"13",key:"1gkch0"}],["line",{x1:"12",x2:"12.01",y1:"17",y2:"17",key:"io3f8k"}]])},34800:function(e,r,n){n.d(r,{Z:function(){return s}});var i=n(56626);let s=(0,i.Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},28802:function(e,r,n){n.d(r,{Z:function(){return y}});var i=n(55386),s=n(9747),t=n(34800),o=n(56626);let c=(0,o.Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var a=function(e){var r=void 0;switch(e.status){case s.S.ACTIVE_HEALTHY:r="isHealthy";break;case s.S.GOING_DOWN:case s.S.PAUSING:r="isPausing";break;case s.S.INACTIVE:r="isPaused";break;case s.S.RESTORING:r="isRestoring";break;case s.S.UNKNOWN:case s.S.COMING_UP:r="isComingUp"}return r},l=n(24990),d=n(90861),u=n(21806);let g=(0,o.Z)("RefreshCcw",[["path",{d:"M3 2v6h6",key:"18ldww"}],["path",{d:"M21 12A9 9 0 0 0 6 5.3L3 8",key:"1pbrqz"}],["path",{d:"M21 22v-6h-6",key:"usdfbe"}],["path",{d:"M3 12a9 9 0 0 0 15 6.7l3-2.7",key:"1hosoe"}]]);var p=n(41051);let f=(0,o.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"16",y2:"12",key:"1y1yb1"}],["line",{x1:"12",x2:"12.01",y1:"8",y2:"8",key:"110wyk"}]]);var x=n(25208),v=n(15659),m=n(72637),h=n(52322),j=function(e){var r=e.resourceWarnings,n=e.projectStatus,i=null!=r&&r.is_readonly_mode_enabled?["is_readonly_mode_enabled"]:Object.keys(r||{}).filter(function(e){return"project"!==e&&"is_readonly_mode_enabled"!==e&&(null==r?void 0:r[e])!==null}),s=i.some(function(e){return(null==r?void 0:r[e])==="critical"}),t=i.includes("is_readonly_mode_enabled")||s,o=void 0!==r?(0,u.L)(r,i[0],"cardContent"):void 0,c="isPaused"===n?"Project is paused":"isPausing"===n?"Project is pausing":"isComingUp"===n?"Project is coming up":"isRestoring"===n?"Project is restoring":r?i.length>1?d.x.multiple_resource_warnings.cardContent[s?"critical":"warning"].title:null==o?void 0:o.title:void 0,a="isPaused"===n?"This project will not accept requests until resumed":"isPausing"===n?"The pause process will complete in a few minutes":"isComingUp"===n||"isRestoring"===n?"Your project will be ready in a few minutes":r?(i.length,null==o?void 0:o.description):void 0,j=t?"destructive":"isPaused"===n?"default":"warning";return(0===i.length||void 0===o)&&"isHealthy"===n?null:(0,h.jsxs)(x.bZ,{variant:j,className:(0,v.cn)("border-0 p-5 pb-[1.25rem]","bg-transparent","[&>svg]:left-[1.25rem] [&>svg]:top-3.5 [&>svg]:border",t?"":"[&>svg]:text-foreground [&>svg]:bg-surface-100"),children:["isPaused"===n||"isPausing"===n?(0,h.jsx)(m.Z,{strokeWidth:1.5,size:12}):"isRestoring"===n||"isComingUp"===n?(0,h.jsx)(g,{strokeWidth:1.5,size:12}):(0,h.jsx)(p.Z,{strokeWidth:1.5,size:12}),(0,h.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,h.jsx)(x.Cd,{className:"text-xs mb-0",children:c}),(0,h.jsxs)(l.fC,{delayDuration:0,children:[(0,h.jsx)(l.xz,{children:(0,h.jsx)(f,{size:14,className:"text-foreground-light hover:text-foreground"})}),(0,h.jsx)(l.h_,{children:(0,h.jsxs)(l.VY,{side:"bottom",children:[(0,h.jsx)(l.Eh,{className:"radix-tooltip-arrow"}),(0,h.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border bg-background",children:(0,h.jsx)("span",{className:"text-xs text-foreground",children:a})})]})})]})]})]})},y=function(e){var r,n=e.project,o=e.rewriteHref,l=e.githubIntegration,d=e.vercelIntegration,u=e.resourceWarnings,g=n.name,p=n.ref,f="".concat(n.cloud_provider," | ").concat(n.region),x=n.preview_branch_refs.length>0,v=null!==(r=null==l?void 0:l.metadata.name)&&void 0!==r?r:void 0,m=a(n);return(0,h.jsx)("li",{className:"list-none",children:(0,h.jsx)(i.Z,{linkHref:o||"/project/".concat(p),className:"h-44 !px-0 group pt-5 pb-0",title:(0,h.jsxs)("div",{className:"w-full justify-between space-y-1.5 px-5",children:[(0,h.jsx)("p",{className:"flex-shrink truncate text-sm pr-4",children:g}),(0,h.jsx)("span",{className:"text-sm lowercase text-foreground-light",children:f}),(0,h.jsxs)("div",{className:"flex items-center space-x-1.5",children:[void 0!==d&&(0,h.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center border-controler",children:(0,h.jsx)("img",{src:"".concat(s.GW,"/img/icons/vercel-icon.svg"),alt:"Vercel Icon",className:"w-3"})}),x&&(0,h.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center border-controler",children:(0,h.jsx)(t.Z,{size:12,strokeWidth:1.5})}),void 0!==l&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center border-controler",children:(0,h.jsx)(c,{size:12,strokeWidth:1.5})}),(0,h.jsx)("p",{className:"text-xs !ml-2 text-foreground-light",children:v})]})]})]}),footer:(0,h.jsx)(j,{projectStatus:m,resourceWarnings:u})})})}},83181:function(e,r,n){var i=n(55386),s=n(52322);r.Z=function(){return(0,s.jsx)(i.Z,{title:"",footer:(0,s.jsx)("div",{className:"shimmering-loader rounded py-3 mx-1 w-1/3"}),children:(0,s.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,s.jsx)("div",{className:"shimmering-loader rounded py-3 mx-1 w-2/3"})})})}},53313:function(e,r,n){n.d(r,{Z:function(){return G}});var i=n(76635),s=n(46776),t=n(39097),o=n.n(t),c=n(8647),a=n(31375),l=n(45812),d=n(95235),u=n(82269),g=n(20406),p=n(28526),f=n.n(p),x=n(58943),v=n(37552),m=n(9747),h=n(96132),j=["enabled"];function y(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function b(){return(b=(0,g.Z)(f().mark(function e(r){var n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.U2)("".concat(m.T5,"/stripe/invoices/overdue"),{signal:r});case 2:if(!(n=e.sent).error){e.next=5;break}throw n.error;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.enabled,n=(0,u.Z)(e,j);return(0,x.a)(h.Y.overdueInvoices(),function(e){return function(e){return b.apply(this,arguments)}(e.signal)},function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?y(Object(n),!0).forEach(function(r){(0,d.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}({enabled:void 0===r||r},n))},N=n(54947),k=n(43095),P=n(29298),_=n(87471),Z=n(210),O=n(28802),I=n(83181),E=n(87875),C=n(70203),S=n(52322),z=(0,s.Pi)(function(e){var r=e.rewriteHref,n=(0,N.tl)(),s=n.data,t=n.isSuccess,o=(0,P.Sy)(),c=o.data,a=o.isLoading,l=o.isError,d=o.error,u=(0,k.js)(),g=u.isLoading,p=u.isError,f=u.error,x=(0,_.q)().data,v=w({enabled:m.Qy}).data,h=(0,i.groupBy)(c,"organization_id"),j=!!m.Qy&&g;return t&&s&&(null==s?void 0:s.length)>0?(0,S.jsx)(S.Fragment,{children:null==s?void 0:s.map(function(e){return(0,S.jsx)(W,{organization:e,projects:h[e.id],overdueInvoices:(null!=v?v:[]).filter(function(r){return r.organization_id===e.id}),resourceWarnings:null!=x?x:[],rewriteHref:r,isLoadingPermissions:j,isErrorPermissions:p,permissionsError:f,isLoadingProjects:a,isErrorProjects:l,projectsError:d},e.id)})}):(0,S.jsx)(H,{slug:""})}),W=function(e){var r=e.organization,n=r.name,i=r.slug,s=(r.subscription_id,e.projects),t=e.overdueInvoices,a=e.resourceWarnings,d=e.isLoadingPermissions,u=e.isErrorPermissions,g=e.permissionsError,p=e.isLoadingProjects,f=e.isErrorProjects,x=e.projectsError,v=e.rewriteHref,m=(0,C.lL)(),h=!s||0===s.length,j=(0,E.T)({orgSlug:null==m?void 0:m.slug}).data,y=null==j?void 0:j.filter(function(e){return"GitHub"===e.integration.name}).flatMap(function(e){return e.connections}),b=null==j?void 0:j.filter(function(e){return"Vercel"===e.integration.name}).flatMap(function(e){return e.connections});return(0,S.jsxs)("div",{className:"space-y-3",children:[(0,S.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,S.jsx)("h4",{className:"text-lg flex items-center",children:n}),!!t.length&&(0,S.jsx)("div",{children:(0,S.jsx)(c.z,{asChild:!0,type:"danger",children:(0,S.jsx)(o(),{href:"/org/".concat(i,"/invoices"),children:"Outstanding Invoices"})})})]}),d||p?(0,S.jsxs)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:[(0,S.jsx)(I.Z,{}),(0,S.jsx)(I.Z,{})]}):(0,S.jsx)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:u?(0,S.jsx)("div",{className:"col-span-3",children:(0,S.jsx)(l.Z,{subject:"Failed to retrieve permissions for your account",error:g})}):f?(0,S.jsx)("div",{className:"col-span-3",children:(0,S.jsx)(l.Z,{subject:"Failed to retrieve projects under ".concat(n),error:x})}):h?(0,S.jsx)(H,{slug:i}):null==s?void 0:s.map(function(e){return(0,S.jsx)(O.Z,{project:e,rewriteHref:v?v(e.ref):void 0,resourceWarnings:a.find(function(r){return r.project===e.ref}),githubIntegration:null==y?void 0:y.find(function(r){return r.supabase_project_ref===e.ref}),vercelIntegration:null==b?void 0:b.find(function(r){return r.supabase_project_ref===e.ref})},(0,Z.pZ)(5))})})]},(0,Z.pZ)(5))},H=function(e){var r=e.slug;return(0,S.jsxs)("div",{className:"col-span-4 space-y-4 rounded-lg border-2 border-dashed border-gray-300 p-6 text-center",children:[(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("p",{children:"No projects"}),(0,S.jsx)("p",{className:"text-sm text-foreground-light",children:"Get started by creating a new project."})]}),(0,S.jsx)("div",{children:(0,S.jsx)(c.z,{asChild:!0,icon:(0,S.jsx)(a.Z,{}),children:(0,S.jsx)(o(),{href:"/new/".concat(r),children:"New Project"})})})]})},G=z},96132:function(e,r,n){n.d(r,{Y:function(){return i}});var i={overdueInvoices:function(){return["invoices","overdue"]},invoice:function(e){return["invoice",e]},list:function(e,r,n){return["invoices",e,r,n]},count:function(e,r){return["invoices",e,r,"count"]},projectInvoices:function(e,r){return["invoices",e,r]},projectInvoicesCount:function(e){return["invoices",e,"count"]},upcomingPreview:function(e){return["invoices",e,"upcoming-preview"]},orgUpcomingPreview:function(e){return["invoices",e,"upcoming-preview"]}}}}]);