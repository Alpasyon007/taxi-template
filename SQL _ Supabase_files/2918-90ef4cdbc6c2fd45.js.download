"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2918],{32989:function(e,t,r){r.d(t,{y:function(){return n}});var n=RegExp("(".concat(/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_*-]+(\.[a-zA-Z0-9_*-]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/gm.source,")|(").concat(/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/i.source,")|(").concat(/^[a-z0-9-]+([.][a-z0-9]+)*:\/(\/[-a-z0-9._~!$&'()*+,;=:@%]+)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/i.source,")|(").concat(/chrome-extension:\/\/([a-zA-Z]*)/gm.source,")"),"i")},50838:function(e,t,r){r.d(t,{F:function(){return i},n:function(){return n}});var n=function(e){var t;return!!(null!=e&&e.SMTP_ADMIN_EMAIL&&null!=e&&e.SMTP_SENDER_NAME&&null!=e&&e.SMTP_USER&&null!=e&&e.SMTP_HOST&&null!=e&&e.SMTP_PASS&&null!=e&&e.SMTP_PORT&&(null!==(t=null==e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==t?t:0)>=0)},i=function(e){var t,r,i,s,o,a,c,l;return{ENABLE_SMTP:n(e),SMTP_ADMIN_EMAIL:null!==(t=null==e?void 0:e.SMTP_ADMIN_EMAIL)&&void 0!==t?t:"",SMTP_SENDER_NAME:null!==(r=null==e?void 0:e.SMTP_SENDER_NAME)&&void 0!==r?r:"",SMTP_USER:null!==(i=null==e?void 0:e.SMTP_USER)&&void 0!==i?i:"",SMTP_HOST:null!==(s=null==e?void 0:e.SMTP_HOST)&&void 0!==s?s:"",SMTP_PASS:null!==(o=null==e?void 0:e.SMTP_PASS)&&void 0!==o?o:"",SMTP_PORT:null!==(a=null==e?void 0:e.SMTP_PORT)&&void 0!==a?a:"465",SMTP_MAX_FREQUENCY:null!==(c=null==e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==c?c:60,RATE_LIMIT_EMAIL_SENT:null!==(l=null==e?void 0:e.RATE_LIMIT_EMAIL_SENT)&&void 0!==l?l:30}}},9655:function(e,t,r){r.d(t,{U7:function(){return eZ},dU:function(){return e_},SK:function(){return ek},uW:function(){return ev},m9:function(){return eR},Q:function(){return t5}});var n=r(12741),i=r(43991),s=r(25208),o=r(23733),a=r(57626),c=r(28861),l=r(35933),u=r(65413),d=r(32989),p=function(e){return atob(e.replace(/[-]/g,"+").replace(/[_]/g,"/"))},h="http://json-schema.org/draft-07/schema#",E={$schema:h,type:"object",title:"Email",properties:{EXTERNAL_EMAIL_ENABLED:{title:"Enable Email provider",description:"This will enable Email based signup and login for your application",type:"boolean"},MAILER_AUTOCONFIRM:{title:"Confirm email",description:"Users will need to confirm their email address before signing in for the first time.",type:"boolean"},MAILER_SECURE_EMAIL_CHANGE_ENABLED:{title:"Secure email change",description:"Users will be required to confirm any email change on both the old email address and new email address.\n      If disabled, only the new email is required to confirm.",type:"boolean"},SECURITY_UPDATE_PASSWORD_REQUIRE_REAUTHENTICATION:{title:"Secure password change",description:"Users will need to be recently logged in to change their password without requiring reauthentication.\n      If disabled, a user can change their password at any time.",type:"boolean"},MAILER_OTP_EXP:{title:"Mailer OTP Expiration",type:"number",description:"Duration before an email otp / link expires.",units:"seconds"},PASSWORD_MIN_LENGTH:{title:"Min password length",description:"Users will not be able to use a password shorter than this.",type:"number"}},validationSchema:(0,u.object)().shape({PASSWORD_MIN_LENGTH:(0,u.number)().required("A password is required.").min(6,"Password length must be at least 6 characters long"),MAILER_OTP_EXP:(0,u.number)().min(0,"Must be more than 0").max(86400,"Must be no more than 86400").required("This is required")}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},f={$schema:h,type:"object",title:"Phone",properties:{EXTERNAL_PHONE_ENABLED:{title:"Enable Phone provider",description:"This will enable phone based login for your application",type:"boolean"},SMS_PROVIDER:{type:"select",title:"SMS provider",description:"External provider that will handle sending SMS messages",enum:[{label:"Twilio",value:"twilio",icon:"twilio-icon.svg"},{label:"Messagebird",value:"messagebird",icon:"messagebird-icon.svg"},{label:"Textlocal",value:"textlocal",icon:"textlocal-icon.png"},{label:"Vonage",value:"vonage",icon:"vonage-icon.svg"},{label:"Twilio Verify",value:"twilio_verify",icon:"twilio-icon.svg"}]},SMS_TWILIO_ACCOUNT_SID:{type:"string",title:"Twilio Account SID",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_AUTH_TOKEN:{type:"string",title:"Twilio Auth Token",isSecret:!0,show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_MESSAGE_SERVICE_SID:{type:"string",title:"Twilio Message Service SID",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_CONTENT_SID:{type:"string",title:"Twilio Content SID (Optional, For WhatsApp Only)",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_VERIFY_ACCOUNT_SID:{type:"string",title:"Twilio Account SID",show:{key:"SMS_PROVIDER",matches:["twilio_verify"]}},SMS_TWILIO_VERIFY_AUTH_TOKEN:{type:"string",title:"Twilio Auth Token",isSecret:!0,show:{key:"SMS_PROVIDER",matches:["twilio_verify"]}},SMS_TWILIO_VERIFY_MESSAGE_SERVICE_SID:{type:"string",title:"Twilio Verify Service SID",show:{key:"SMS_PROVIDER",matches:["twilio_verify"]}},SMS_MESSAGEBIRD_ACCESS_KEY:{type:"string",title:"Messagebird Access Key",show:{key:"SMS_PROVIDER",matches:["messagebird"]}},SMS_MESSAGEBIRD_ORIGINATOR:{type:"string",title:"Messagebird Originator",show:{key:"SMS_PROVIDER",matches:["messagebird"]}},SMS_TEXTLOCAL_API_KEY:{type:"string",title:"Textlocal API Key",show:{key:"SMS_PROVIDER",matches:["textlocal"]}},SMS_TEXTLOCAL_SENDER:{type:"string",title:"Textlocal Sender",show:{key:"SMS_PROVIDER",matches:["textlocal"]}},SMS_VONAGE_API_KEY:{type:"string",title:"Vonage API Key",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_VONAGE_API_SECRET:{type:"string",title:"Vonage API Secret",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_VONAGE_FROM:{type:"string",title:"Vonage From",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_AUTOCONFIRM:{title:"Enable phone confirmations",type:"boolean",description:"Users will need to confirm their phone number before signing in."},SMS_OTP_EXP:{title:"SMS OTP Expiry",type:"number",description:"Duration before an SMS OTP expires",units:"seconds",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_OTP_LENGTH:{title:"SMS OTP Length",type:"number",description:"Number of digits in OTP",units:"digits",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_TEMPLATE:{title:"SMS Message",type:"multiline-string",description:"To format the OTP code use `{{ .Code }}`",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_TEST_OTP:{type:"string",title:"Test Phone Numbers and OTPs",description:"Register phone number and OTP combinations for testing as a comma separated list of <phone number>=<otp> pairs. Example: `18005550123=789012`"},SMS_TEST_OTP_VALID_UNTIL:{type:"datetime",title:"Test OTPs Valid Until",description:"Test phone number and OTP combinations won't be active past this date and time (local time zone).",show:{key:"SMS_TEST_OTP"}}},validationSchema:(0,u.object)().shape({EXTERNAL_PHONE_ENABLED:(0,u.boolean)().required(),SMS_PROVIDER:(0,u.string)().required(),SMS_TWILIO_ACCOUNT_SID:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Account SID is required")},otherwise:function(e){return e}}),SMS_TWILIO_AUTH_TOKEN:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Auth Token is required")},otherwise:function(e){return e}}),SMS_TWILIO_MESSAGE_SERVICE_SID:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Message Service SID is required")},otherwise:function(e){return e}}),SMS_TWILIO_VERIFY_ACCOUNT_SID:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio-verify"===t},then:function(e){return e.required("Twilio Verify Account SID is required")},otherwise:function(e){return e}}),SMS_TWILIO_VERIFY_AUTH_TOKEN:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio-verify"===t},then:function(e){return e.required("Twilio Verify Auth Token is required")},otherwise:function(e){return e}}),SMS_TWILIO_VERIFY_MESSAGE_SERVICE_SID:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio-verify"===t},then:function(e){return e.required("Twilio Verify Service SID is required")},otherwise:function(e){return e}}),SMS_MESSAGEBIRD_ACCESS_KEY:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"messagebird"===t},then:function(e){return e.required("Messagebird Access Key is required")},otherwise:function(e){return e}}),SMS_MESSAGEBIRD_ORIGINATOR:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"messagebird"===t},then:function(e){return e.required("Messagebird Originator is required")},otherwise:function(e){return e}}),SMS_TEXTLOCAL_API_KEY:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"textlocal"===t},then:function(e){return e.required("Textlocal API Key is required")},otherwise:function(e){return e}}),SMS_TEXTLOCAL_SENDER:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"textlocal"===t},then:function(e){return e.required("Textlocal Sender is required")},otherwise:function(e){return e}}),SMS_VONAGE_API_KEY:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage API is required")},otherwise:function(e){return e}}),SMS_VONAGE_API_SECRET:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage API Secret is required")},otherwise:function(e){return e}}),SMS_VONAGE_FROM:(0,u.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage From is required")},otherwise:function(e){return e}}),SMS_OTP_EXP:(0,u.number)().min(0,"Must be more than 0").required("This is required"),SMS_OTP_LENGTH:(0,u.number)().min(6,"Must be 6 or more in length").required("This is required"),SMS_TEMPLATE:(0,u.string)().required("SMS template is required."),SMS_TEST_OTP:(0,u.string)().matches(/^\s*([0-9]{1,15}=[0-9]+)(\s*,\s*[0-9]{1,15}=[0-9]+)*\s*$/g,"Must be a comma-separated list of <phone number>=<OTP> pairs. Phone numbers should be in international format, without spaces, dashes or the + prefix. Example: 123456789=987654").trim().transform(function(e){return e.replace(/\s+/g,"")}),SMS_TEST_OTP_VALID_UNTIL:(0,u.string)().when(["SMS_TEST_OTP"],{is:function(e){return!!e},then:function(e){return e.required("You must provide a valid until date.")},otherwise:function(e){return e.transform(function(e){return""})}})}),misc:{iconKey:"phone-icon4",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},m={$schema:h,type:"object",title:"Apple",properties:{EXTERNAL_APPLE_ENABLED:{title:"Enable Sign in with Apple",description:"Enables Sign in with Apple on the web using OAuth or natively within iOS, macOS, watchOS or tvOS apps.",type:"boolean"},EXTERNAL_APPLE_CLIENT_ID:{title:"Service ID (for OAuth)",description:"Client identifier used in the OAuth flow on the web.\n[Learn more](https://developer.apple.com/documentation/sign_in_with_apple/configuring_your_environment_for_sign_in_with_apple)",type:"string"},EXTERNAL_APPLE_SECRET:{title:"Secret Key (for OAuth)",description:"Secret key used in the OAuth flow.\n[Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#generate-a-client_secret)",type:"string",isSecret:!0},EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS:{title:"Authorized Client IDs (iOS, macOS, watchOS, tvOS bundle IDs or service IDs)",description:"Comma separated list of allowed Apple app bundle IDs for native sign in, or service IDs for Sign in with Apple JS. [Learn more](https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_js)",type:"string"}},validationSchema:(0,u.object)().shape({EXTERNAL_APPLE_ENABLED:(0,u.boolean)().required(),EXTERNAL_APPLE_SECRET:(0,u.string)().when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_CLIENT_ID"],{is:function(e,t){return e&&!!t},then:function(e){return e.required("Secret key is required when using the OAuth flow.").matches(/^[a-z0-9_-]+([.][a-z0-9_-]+){2}$/i,"Secret key should be a JWT.").test({message:"Secret key is not a correctly generated JWT.",test:function(e){if(!e)return!0;try{var t=e.split(".").map(function(e){return p(e)}),r=JSON.parse(t[0]),n=JSON.parse(t[1]);return"object"==typeof r&&"object"==typeof n&&r&&n&&"ES256"===r.alg&&"https://appleid.apple.com"===n.aud}catch(e){return console.log(e),!1}return!0}}).test({message:"Secret key expires in less than 7 days!",test:function(e){if(!e)return!0;try{var t=e.split(".").map(function(e){return p(e)}),r=JSON.parse(t[1]);return Date.now()>r.exp-6048e5}catch(e){return console.log(e),!1}return!0}})}}).when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS","EXTERNAL_APPLE_CLIENT_ID"],{is:function(e,t,r){return e&&!!t&&!r},then:function(e){return e.matches(/^$/,"Secret Key should only be set if Service ID for OAuth is provided.")}}),EXTERNAL_APPLE_CLIENT_ID:(0,u.string)().matches(/^[a-z0-9.-]+$/i,"Invalid characters. Apple recommends a reverse-domain name style string (e.g. com.example.app)."),EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS:(0,u.string)().matches(/^([.a-z0-9-]+(,\s*[.a-z0-9-]+)*,*\s*)?$/i,"Invalid characters. Apple recommends a reverse-domain name style string (e.g. com.example.app). You must only use explicit bundle IDs, asterisks (*) are not allowed.").when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_CLIENT_ID"],{is:function(e,t){return e&&!t},then:function(e){return e.required("At least one Authorized Client ID is required when not using the OAuth flow.")}})}),misc:{iconKey:"apple-icon",requiresRedirect:!0,helper:"Register this callback URL when using Sign in with Apple on the web in the Apple Developer Center.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)",alert:{title:"Apple OAuth secret keys expire every 6 months",description:"A new secret should be generated every 6 months, otherwise users on the web will not be able to sign in."}}},_={$schema:h,type:"object",title:"Azure",properties:{EXTERNAL_AZURE_ENABLED:{title:"Azure enabled",type:"boolean"},EXTERNAL_AZURE_CLIENT_ID:{title:"Application (client) ID",type:"string"},EXTERNAL_AZURE_SECRET:{title:"Secret Value",description:"Enter the data from Value, not the Secret ID. [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-azure#obtain-a-secret-id)",type:"string",isSecret:!0},EXTERNAL_AZURE_URL:{title:"Azure Tenant URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,u.object)().shape({EXTERNAL_AZURE_ENABLED:(0,u.boolean)().required(),EXTERNAL_AZURE_CLIENT_ID:(0,u.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:function(e){return e.required("Application (client) ID is required")},otherwise:function(e){return e}}),EXTERNAL_AZURE_SECRET:(0,u.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:function(e){return e.required("Secret Value is required")},otherwise:function(e){return e}}),EXTERNAL_AZURE_URL:(0,u.string)().matches(d.y,"Must be a valid URL").optional()}),misc:{iconKey:"microsoft-icon",requiresRedirect:!0}},T={$schema:h,type:"object",title:"Bitbucket",properties:{EXTERNAL_BITBUCKET_ENABLED:{title:"Bitbucket enabled",type:"boolean"},EXTERNAL_BITBUCKET_CLIENT_ID:{title:"Key",type:"string"},EXTERNAL_BITBUCKET_SECRET:{title:"Secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_BITBUCKET_ENABLED:(0,u.boolean)().required(),EXTERNAL_BITBUCKET_CLIENT_ID:(0,u.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:function(e){return e.required("Key is required")},otherwise:function(e){return e}}),EXTERNAL_BITBUCKET_SECRET:(0,u.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:function(e){return e.required("Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"bitbucket-icon",requiresRedirect:!0}},S={$schema:h,type:"object",title:"Discord",properties:{EXTERNAL_DISCORD_ENABLED:{title:"Discord enabled",type:"boolean"},EXTERNAL_DISCORD_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_DISCORD_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_DISCORD_ENABLED:(0,u.boolean)().required(),EXTERNAL_DISCORD_CLIENT_ID:(0,u.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_DISCORD_SECRET:(0,u.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"discord-icon",requiresRedirect:!0}},b={$schema:h,type:"object",title:"Facebook",properties:{EXTERNAL_FACEBOOK_ENABLED:{title:"Facebook enabled",type:"boolean"},EXTERNAL_FACEBOOK_CLIENT_ID:{title:"Facebook client ID",type:"string"},EXTERNAL_FACEBOOK_SECRET:{title:"Facebook secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_FACEBOOK_ENABLED:(0,u.boolean)().required(),EXTERNAL_FACEBOOK_CLIENT_ID:(0,u.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:function(e){return e.required('"Facebook client ID" is required')},otherwise:function(e){return e}}),EXTERNAL_FACEBOOK_SECRET:(0,u.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:function(e){return e.required('"Facebook secret" is required')},otherwise:function(e){return e}})}),misc:{iconKey:"facebook-icon",requiresRedirect:!0}},g={$schema:h,type:"object",title:"Figma",properties:{EXTERNAL_FIGMA_ENABLED:{title:"Figma enabled",type:"boolean"},EXTERNAL_FIGMA_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_FIGMA_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_FIGMA_ENABLED:(0,u.boolean)().required(),EXTERNAL_FIGMA_CLIENT_ID:(0,u.string)().when("EXTERNAL_FIGMA_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_FIGMA_SECRET:(0,u.string)().when("EXTERNAL_FIGMA_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"figma-icon",requiresRedirect:!0}},A={$schema:h,type:"object",title:"GitHub",properties:{EXTERNAL_GITHUB_ENABLED:{title:"GitHub enabled",type:"boolean"},EXTERNAL_GITHUB_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_GITHUB_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_GITHUB_ENABLED:(0,u.boolean)().required(),EXTERNAL_GITHUB_CLIENT_ID:(0,u.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_GITHUB_SECRET:(0,u.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"github-icon",requiresRedirect:!0}},N={$schema:h,type:"object",title:"GitLab",properties:{EXTERNAL_GITLAB_ENABLED:{title:"GitLab enabled",type:"boolean"},EXTERNAL_GITLAB_CLIENT_ID:{title:"Application ID",type:"string"},EXTERNAL_GITLAB_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_GITLAB_URL:{title:"Self Hosted GitLab URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,u.object)().shape({EXTERNAL_GITLAB_ENABLED:(0,u.boolean)().required(),EXTERNAL_GITLAB_CLIENT_ID:(0,u.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_GITLAB_SECRET:(0,u.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}}),EXTERNAL_GITLAB_URL:(0,u.string)().matches(d.y,"Must be a valid URL").optional()}),misc:{iconKey:"gitlab-icon",requiresRedirect:!0}},O={$schema:h,type:"object",title:"Google",properties:{EXTERNAL_GOOGLE_ENABLED:{title:"Enable Sign in with Google",description:"Enables Sign in with Google on the web using OAuth or One Tap, or in Android apps or Chrome extensions.",type:"boolean"},EXTERNAL_GOOGLE_CLIENT_ID:{title:"Client ID (for OAuth)",description:"Client ID to use with the OAuth flow on the web.",type:"string"},EXTERNAL_GOOGLE_SECRET:{title:"Client Secret (for OAuth)",description:"Client Secret to use with the OAuth flow on the web.",type:"string",isSecret:!0},EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS:{title:"Authorized Client IDs (for Android, One Tap, and Chrome extensions)",description:"Comma separated list of client IDs of Android apps, One Tap or Chrome extensions that are allowed to log in to your project.",type:"string"},EXTERNAL_GOOGLE_SKIP_NONCE_CHECK:{title:"Skip nonce checks",description:"Allows ID tokens with any nonce to be accepted, which is less secure. Useful in situations where you don't have access to the nonce used to issue the ID token, such with iOS.",type:"boolean"}},validationSchema:(0,u.object)().shape({EXTERNAL_GOOGLE_ENABLED:(0,u.boolean)().required(),EXTERNAL_GOOGLE_SECRET:(0,u.string)().when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_CLIENT_ID"],{is:function(e,t){return e&&!!t},then:function(e){return e.matches(/^[a-z0-9.\/_-]*$/i,"Invalid characters. Google OAuth Client Secrets usually contain letters, numbers, dots, dashes and underscores.").required("Client Secret is required when using the OAuth flow.")}}).when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS","EXTERNAL_GOOGLE_CLIENT_ID"],{is:function(e,t,r){return e&&!!t&&!r},then:function(e){return e.matches(/^$/,"Client Secret should only be set when Client ID for OAuth is set.")}}),EXTERNAL_GOOGLE_CLIENT_ID:(0,u.string)().matches(/^([a-z0-9-]+([.][a-z0-9-]+)+)?$/i,"Invalid characters. Google OAuth Client IDs are usually a domain-name (e.g. 01234567890-abcdefghijklmnopqrstuvwxyz012345.apps.googleusercontent.com)."),EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS:(0,u.string)().matches(/^([a-z0-9-]+([.][a-z0-9-]+)*(,\s*[a-z0-9-]+([.][a-z0-9-]+)*)*,*\s*)?$/i,"Invalid characters. Google Client IDs are usually a domain-name style string (e.g. com.example.com.app or *.apps.googleusercontent.com).").when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_CLIENT_ID"],{is:function(e,t){return e&&!t},then:function(e){return e.required("At least one Authorized Client ID is required when not using the OAuth flow.")}}),EXTERNAL_GOOGLE_SKIP_NONCE_CHECK:(0,u.boolean)().required()}),misc:{iconKey:"google-icon",requiresRedirect:!0,helper:"Register this callback URL when using Sign-in with Google on the web using OAuth.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-google#configure-your-services-id)"}},y={$schema:h,type:"object",title:"Kakao",properties:{EXTERNAL_KAKAO_ENABLED:{title:"Kakao enabled",type:"boolean"},EXTERNAL_KAKAO_CLIENT_ID:{title:"REST API Key",type:"string"},EXTERNAL_KAKAO_SECRET:{title:"Client Secret Code",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_KAKAO_ENABLED:(0,u.boolean)().required(),EXTERNAL_KAKAO_CLIENT_ID:(0,u.string)().when("EXTERNAL_KAKAO_ENABLED",{is:!0,then:function(e){return e.required("REST API Key is required")},otherwise:function(e){return e}}),EXTERNAL_KAKAO_SECRET:(0,u.string)().when("EXTERNAL_KAKAO_ENABLED",{is:!0,then:function(e){return e.required("Client Secret Code is required")},otherwise:function(e){return e}})}),misc:{iconKey:"kakao-icon",requiresRedirect:!0}},j={$schema:h,type:"object",title:"KeyCloak",properties:{EXTERNAL_KEYCLOAK_ENABLED:{title:"Keycloak enabled",type:"boolean"},EXTERNAL_KEYCLOAK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_KEYCLOAK_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_KEYCLOAK_URL:{title:"Realm URL",description:"",type:"string"}},validationSchema:(0,u.object)().shape({EXTERNAL_KEYCLOAK_ENABLED:(0,u.boolean)().required(),EXTERNAL_KEYCLOAK_CLIENT_ID:(0,u.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_KEYCLOAK_SECRET:(0,u.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}}),EXTERNAL_KEYCLOAK_URL:(0,u.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.matches(d.y,"Must be a valid URL").required("Realm URL is required")},otherwise:function(e){return e.matches(d.y,"Must be a valid URL")}})}),misc:{iconKey:"keycloak-icon",requiresRedirect:!0}},v={$schema:h,type:"object",title:"LinkedIn (Deprecated)",properties:{EXTERNAL_LINKEDIN_ENABLED:{title:"Linkedin (Deprecated) enabled",type:"boolean"},EXTERNAL_LINKEDIN_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_LINKEDIN_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_LINKEDIN_ENABLED:(0,u.boolean)().required(),EXTERNAL_LINKEDIN_CLIENT_ID:(0,u.string)().when("EXTERNAL_LINKEDIN_ENABLED",{is:!0,then:function(e){return e.required("API Key is required")},otherwise:function(e){return e}}),EXTERNAL_LINKEDIN_SECRET:(0,u.string)().when("EXTERNAL_LINKEDIN_ENABLED",{is:!0,then:function(e){return e.required("API Secret Key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"linkedin-icon",requiresRedirect:!0}},x={$schema:h,type:"object",title:"LinkedIn (OIDC)",properties:{EXTERNAL_LINKEDIN_OIDC_ENABLED:{title:"LinkedIn enabled",type:"boolean"},EXTERNAL_LINKEDIN_OIDC_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_LINKEDIN_OIDC_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_LINKEDIN_OIDC_ENABLED:(0,u.boolean)().required(),EXTERNAL_LINKEDIN_OIDC_CLIENT_ID:(0,u.string)().when("EXTERNAL_LINKEDIN_OIDC_ENABLED",{is:!0,then:function(e){return e.required("API Key is required")},otherwise:function(e){return e}}),EXTERNAL_LINKEDIN_OIDC_SECRET:(0,u.string)().when("EXTERNAL_LINKEDIN_OIDC_ENABLED",{is:!0,then:function(e){return e.required("API Secret Key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"linkedin-icon",requiresRedirect:!0}},L={$schema:h,type:"object",title:"Notion",properties:{EXTERNAL_NOTION_ENABLED:{title:"Notion enabled",type:"boolean"},EXTERNAL_NOTION_CLIENT_ID:{title:"OAuth client ID",type:"string"},EXTERNAL_NOTION_SECRET:{title:"OAuth client secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_NOTION_ENABLED:(0,u.boolean)().required(),EXTERNAL_NOTION_CLIENT_ID:(0,u.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:function(e){return e.required("OAuth client ID is required")},otherwise:function(e){return e}}),EXTERNAL_NOTION_SECRET:(0,u.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:function(e){return e.required("OAuth client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"notion-icon",requiresRedirect:!0}},R={$schema:h,type:"object",title:"Twitch",properties:{EXTERNAL_TWITCH_ENABLED:{title:"Twitch enabled",type:"boolean"},EXTERNAL_TWITCH_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_TWITCH_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_TWITCH_ENABLED:(0,u.boolean)().required(),EXTERNAL_TWITCH_CLIENT_ID:(0,u.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_TWITCH_SECRET:(0,u.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"twitch-icon",requiresRedirect:!0}},w={$schema:h,type:"object",title:"Twitter",properties:{EXTERNAL_TWITTER_ENABLED:{title:"Twitter enabled",type:"boolean"},EXTERNAL_TWITTER_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_TWITTER_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_TWITTER_ENABLED:(0,u.boolean)().required(),EXTERNAL_TWITTER_CLIENT_ID:(0,u.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:function(e){return e.required("API Key is required")},otherwise:function(e){return e}}),EXTERNAL_TWITTER_SECRET:(0,u.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:function(e){return e.required("API Secret Key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"twitter-icon",requiresRedirect:!0}},I={$schema:h,type:"object",title:"Slack",properties:{EXTERNAL_SLACK_ENABLED:{title:"Slack enabled",type:"boolean"},EXTERNAL_SLACK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SLACK_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_SLACK_ENABLED:(0,u.boolean)().required(),EXTERNAL_SLACK_CLIENT_ID:(0,u.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_SLACK_SECRET:(0,u.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"slack-icon",requiresRedirect:!0}},D={$schema:h,type:"object",title:"Spotify",properties:{EXTERNAL_SPOTIFY_ENABLED:{title:"Spotify enabled",type:"boolean"},EXTERNAL_SPOTIFY_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SPOTIFY_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_SPOTIFY_ENABLED:(0,u.boolean)().required(),EXTERNAL_SPOTIFY_CLIENT_ID:(0,u.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_SPOTIFY_SECRET:(0,u.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"spotify-icon",requiresRedirect:!0}},C={$schema:h,type:"object",title:"WorkOS",properties:{EXTERNAL_WORKOS_ENABLED:{title:"WorkOS enabled",type:"boolean"},EXTERNAL_WORKOS_URL:{title:"WorkOS URL",type:"string"},EXTERNAL_WORKOS_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_WORKOS_SECRET:{title:"Secret Key",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_WORKOS_ENABLED:(0,u.boolean)().required(),EXTERNAL_WORKOS_URL:(0,u.string)().matches(d.y,"Must be a valid URL").when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("WorkOS URL is required")},otherwise:function(e){return e}}),EXTERNAL_WORKOS_CLIENT_ID:(0,u.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_WORKOS_SECRET:(0,u.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"workos-icon",requiresRedirect:!0}},P={$schema:h,type:"object",title:"Zoom",properties:{EXTERNAL_ZOOM_ENABLED:{title:"Zoom enabled",type:"boolean"},EXTERNAL_ZOOM_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_ZOOM_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,u.object)().shape({EXTERNAL_ZOOM_ENABLED:(0,u.boolean)().required(),EXTERNAL_ZOOM_CLIENT_ID:(0,u.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_ZOOM_SECRET:(0,u.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"zoom-icon",requiresRedirect:!0}},M=[E,f,{$schema:h,type:"object",title:"SAML 2.0",properties:{SAML_ENABLED:{title:"Enable SAML 2.0 Single Sign-on",description:"You will need to use the [Supabase CLI](https://supabase.com/docs/guides/auth/sso/auth-sso-saml#managing-saml-20-connections) to set up SAML after enabling it",type:"boolean"}},validationSchema:(0,u.object)().shape({SAML_ENABLED:(0,u.boolean)().required()}),misc:{iconKey:"saml-icon"}},m,_,T,S,b,g,A,N,O,y,j,v,x,L,R,w,I,D,C,P],k="http://json-schema.org/draft-07/schema#",X=[{$schema:k,id:"CONFIRMATION",type:"object",title:"Confirm signup",properties:{MAILER_SUBJECTS_CONFIRMATION:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_CONFIRMATION_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the e-mail address for the new account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n"}},validationSchema:(0,u.object)().shape({MAILER_SUBJECTS_CONFIRMATION:(0,u.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:k,id:"INVITE",type:"object",title:"Invite user",properties:{MAILER_SUBJECTS_INVITE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_INVITE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to accept the invitation to create an account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n"}},validationSchema:(0,u.object)().shape({MAILER_SUBJECTS_INVITE:(0,u.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:k,id:"MAGIC_LINK",type:"object",title:"Magic Link",properties:{MAILER_SUBJECTS_MAGIC_LINK:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_MAGIC_LINK_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL for a one-time login to the user's account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n"}},validationSchema:(0,u.object)().shape({MAILER_SUBJECTS_MAGIC_LINK:(0,u.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:k,id:"EMAIL_CHANGE",type:"object",title:"Change Email Address",properties:{MAILER_SUBJECTS_EMAIL_CHANGE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_EMAIL_CHANGE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the email change\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The original user's email address\n- `{{ .NewEmail }}` : The user's new email address\n- `{{ .Data }}` : The user's `user_metadata`\n"}},validationSchema:(0,u.object)().shape({MAILER_SUBJECTS_EMAIL_CHANGE:(0,u.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:k,id:"RECOVERY",type:"object",title:"Reset Password",properties:{MAILER_SUBJECTS_RECOVERY:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_RECOVERY_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the password reset\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n"}},validationSchema:(0,u.object)().shape({MAILER_SUBJECTS_RECOVERY:(0,u.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}}],U=["bg-surface-100","hover:bg-overlay-hover","data-open:bg-selection","border-default","hover:border-strong data-open:border-strong","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border shadow","transition","first:rounded-tl","first:rounded-tr","last:rounded-bl","last:rounded-br","hover:z-50"],Z=r(95235),q=r(24990),B=r(59491),K=r(2784),F=r(29071),V=r(30265),H=r(7980),G=r(97346),z=r(43635),Y=r(35981),W=r(67270),$=r(14665),J=r(8647),Q=r(57324),ee=r(78452),et=r(70203),er=r(9747),en=r(34161),ei=r(28879),es=r.n(ei),eo=r(37927),ea=r(11306),ec=r(23286),el=r(49257),eu=r(31786),ed=r(52322);function ep(e){return es()(e).format("dddd, MMMM D, YYYY HH:mm:ss Z")}var eh=function(e){var t=e.name,r=e.properties,n=e.formValues,i=e.disabled,s=void 0!==i&&i,o=(0,K.useState)(!!r.isSecret),a=o[0],c=o[1],l=(0,K.useState)(n[t]?ep(new Date(n[t])):""),u=l[0],d=l[1];if((0,K.useEffect)(function(){r.show&&r.show.key&&!n[r.show.key]&&(n[t]="",d(""))},[r.show&&r.show.key&&!n[r.show.key]]),r.show){if(r.show.matches){if(!r.show.matches.includes(n[r.show.key]))return null}else if(!n[r.show.key])return null}switch(r.type){case"datetime":return(0,ed.jsx)($.Z,{size:"small",layout:"vertical",id:t,name:t,type:"text",value:u,readOnly:!0,label:r.title,labelOptional:r.descriptionOptional?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.descriptionOptional}):null,descriptionText:r.description?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.description}):null,actions:(0,ed.jsx)(en.M,{selectsRange:!1,minDate:new Date,from:n[t],to:n[t],onChange:function(e){e&&e.to?(n[t]=e.to,d(ep(new Date(e.to)))):(d(""),n[t]="")},children:(0,ed.jsx)("span",{children:"Pick"})})});case"string":return(0,ed.jsx)($.Z,{size:"small",layout:"vertical",id:t,name:t,disabled:s,type:a?"password":"text",label:r.title,labelOptional:r.descriptionOptional?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.descriptionOptional}):null,descriptionText:r.description?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.description}):null,actions:r.isSecret?(0,ed.jsx)(J.z,{icon:a?(0,ed.jsx)(eo.Z,{}):(0,ed.jsx)(ea.Z,{}),type:"default",onClick:function(){return c(!a)}}):(0,ed.jsx)("span",{className:"mr-3 text-foreground-lighter",children:r.units?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.units}):null})});case"multiline-string":return(0,ed.jsx)($.Z.TextArea,{size:"small",layout:"vertical",id:t,name:t,disabled:s,type:a?"password":"text",label:r.title,labelOptional:r.descriptionOptional?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.descriptionOptional}):void 0,descriptionText:r.description?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.description}):null,actions:r.isSecret?(0,ed.jsx)(J.z,{icon:a?(0,ed.jsx)(eo.Z,{}):(0,ed.jsx)(ea.Z,{}),type:"default",onClick:function(){return c(!a)}}):(0,ed.jsx)("span",{className:"mr-3 text-scale-900",children:r.units?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.units}):null})});case"number":return(0,ed.jsx)(ec.Z,{size:"small",layout:"vertical",id:t,name:t,disabled:s,label:r.title,labelOptional:r.descriptionOptional?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.descriptionOptional}):null,descriptionText:r.description?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.description}):null,actions:(0,ed.jsx)("span",{className:"mr-3 text-foreground-lighter",children:r.units?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r.units}):null})});case"boolean":return(0,ed.jsx)(el.Z,{size:"small",id:t,name:t,disabled:s,label:r.title,descriptionText:r.description?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],className:"form-field-markdown",children:r.description}):null});case"select":return(0,ed.jsx)(eu.Z,{size:"small",name:t,disabled:s,label:r.title,descriptionText:r.description?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],className:"form-field-markdown",children:r.description}):null,defaultValue:r.enum[0],children:r.enum.map(function(e){return(0,ed.jsx)(eu.Z.Option,{id:e.value,label:e.label,value:e.value,addOnBefore:function(){return(0,ed.jsx)("img",{className:"h-6 w-6",src:"".concat(er.GW,"/img/icons/").concat(e.icon)})},children:e.label},e.value)})})}return(0,ed.jsx)(ed.Fragment,{})};function eE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ef(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var em=function(e){var t,r,n=e.config,o=e.provider,a=(0,et.oR)().ui,c=(0,K.useState)(!1),l=c[0],u=c[1],d=(0,i.UO)().ref,p=(0,Q._)(),h=p.mutate,E=p.isLoading,f=["MAILER_AUTOCONFIRM","SMS_AUTOCONFIRM"],m=(0,et.Xo)(B.KA.UPDATE,"custom_config_gotrue"),_=(0,ee.z)({projectRef:d}).data,T="SAML 2.0"===o.title&&n&&n.SAML_ENABLED,S="LinkedIn (OIDC)"===o.title&&n&&n.EXTERNAL_LINKEDIN_OIDC_ENABLED,b=n&&n["EXTERNAL_".concat(null==o?void 0:null===(r=o.title)||void 0===r?void 0:r.toUpperCase(),"_ENABLED")],g=(t={},Object.keys(o.properties).forEach(function(e){var r,i=f.includes(e);if("SAML 2.0"===o.title)t[e]=null!==(r=n[e])&&void 0!==r&&r;else if(i)t[e]=!n[e];else{var s=n[e];t[e]=s||"boolean"!==o.properties[e].type&&""}}),t);return(0,ed.jsxs)(V.ZP,{open:l,onOpenChange:u,className:U.join(" "),children:[(0,ed.jsx)(V.ZP.Trigger,{asChild:!0,children:(0,ed.jsxs)("button",{type:"button",className:"group flex w-full items-center justify-between rounded py-3 px-6 text-foreground",children:[(0,ed.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ed.jsx)(H.Z,{className:"text-border-stronger transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14}),(0,ed.jsx)("img",{src:"".concat(er.GW,"/img/icons/").concat(o.misc.iconKey,".svg"),width:18,alt:"".concat(o.title," auth icon")}),(0,ed.jsx)("span",{className:"text-sm",children:o.title})]}),(0,ed.jsx)("div",{className:"flex items-center gap-3",children:T||b||S?(0,ed.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-brand-400 bg-brand-200 py-1 px-1 text-xs text-brand",children:[(0,ed.jsx)("span",{className:"rounded-full bg-brand p-0.5 text-xs text-brand-200",children:(0,ed.jsx)(G.Z,{strokeWidth:2,size:12})}),(0,ed.jsx)("span",{className:"px-1",children:"Enabled"})]}):(0,ed.jsx)("div",{className:"rounded-md border border-strong bg-surface-100 py-1 px-3 text-xs text-foreground-lighter",children:"Disabled"})})]})}),(0,ed.jsx)(z.Z,{name:"provider-".concat(o.title,"-form"),initialValues:g,validationSchema:o.validationSchema,onSubmit:function(e,t){var r=t.resetForm,n=ef({},e);Object.keys(e).map(function(t){f.includes(t)&&(n[t]=!e[t]),""===n[t]&&(n[t]=null)}),h({projectRef:d,config:n},{onSuccess:function(){r({values:ef({},e),initialValues:ef({},e)}),u(!1),a.setNotification({category:"success",message:"Successfully updated settings"})}})},children:function(e){var t,r,n,i=e.handleReset,a=e.initialValues,c=e.values,l=JSON.stringify(a)===JSON.stringify(c);return(0,ed.jsx)(V.ZP.Content,{children:(0,ed.jsx)("div",{className:" group border-t border-strong bg-surface-100 py-6 px-6 text-foreground ",children:(0,ed.jsxs)("div",{className:"mx-auto my-6 max-w-lg space-y-6",children:["LinkedIn (Deprecated)"===o.title&&(0,ed.jsxs)(s.bZ,{variant:"warning",children:[(0,ed.jsx)(Y.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"LinkedIn (Deprecated) Provider"}),(0,ed.jsx)(s.X,{children:"As of 1st August, LinkedIn has updated their OAuth API scopes. Please use the new LinkedIn provider below. Developers using this provider should move over to the new provider. Please refer to our [docs](/docs/pages/guides/auth/social-login/auth-linkedin) for more details."})]}),"LinkedIn (Deprecated)"===o.title&&Object.keys(o.properties).map(function(e){return(0,ed.jsx)(eh,{name:e,properties:o.properties[e],formValues:c,disabled:"EXTERNAL_LINKEDIN_ENABLED"!==e||!m},e)}),"LinkedIn (Deprecated)"!==o.title&&Object.keys(o.properties).map(function(e){return(0,ed.jsx)(eh,{name:e,properties:o.properties[e],formValues:c,disabled:!m},e)}),(null==o?void 0:null===(t=o.misc)||void 0===t?void 0:t.alert)&&(0,ed.jsx)(W.b,{title:o.misc.alert.title,variant:"warning",withIcon:!0,children:(0,ed.jsx)(F.D,{children:o.misc.alert.description})}),o.misc.requiresRedirect&&(0,ed.jsx)(ed.Fragment,{children:(0,ed.jsx)($.Z,{copy:!0,readOnly:!0,disabled:!0,label:"Callback URL (for OAuth)",value:(null==_?void 0:null===(r=_.customDomain)||void 0===r?void 0:r.status)==="active"?"https://".concat(null===(n=_.customDomain)||void 0===n?void 0:n.hostname,"/auth/v1/callback"):"https://".concat(d,".supabase.co/auth/v1/callback"),descriptionText:(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:o.misc.helper})})}),(0,ed.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,ed.jsx)(J.z,{type:"default",htmlType:"reset",onClick:function(){i(),u(!1)},disabled:E,children:"Cancel"}),(0,ed.jsxs)(q.fC,{delayDuration:0,children:[(0,ed.jsx)(q.xz,{type:"button",children:(0,ed.jsx)(J.z,{htmlType:"submit",loading:E,disabled:E||!m||l,children:"Save"})}),!m&&(0,ed.jsx)(q.h_,{children:(0,ed.jsxs)(q.VY,{side:"bottom",children:[(0,ed.jsx)(q.Eh,{className:"radix-tooltip-arrow"}),(0,ed.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,ed.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to update provider settings"})})]})})]})]})]})})})}})]})},e_=function(){var e=(0,i.UO)().ref,t=(0,l.$E)({projectRef:e}),r=t.isLoading,u=t.error,d=t.isError,p=t.data,h=t.isSuccess;return(0,ed.jsxs)("div",{children:[(0,ed.jsx)(a.ph,{title:"Auth Providers",description:"Authenticate your users through a suite of providers and login methods"}),(0,ed.jsxs)("div",{className:"-space-y-px",children:[r&&M.map(function(e){return(0,ed.jsx)("div",{className:[].concat((0,n.Z)(U),["px-6 py-3"]).join(" "),children:(0,ed.jsx)(c.p,{})},"provider_".concat(e.title))}),d&&(0,ed.jsxs)(s.bZ,{variant:"destructive",children:[(0,ed.jsx)(o.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"Failed to retrieve auth configuration"}),(0,ed.jsx)(s.X,{children:u.message})]}),h&&M.map(function(e){return(0,ed.jsx)(em,{config:p,provider:e},"provider_".concat(e.title))})]})]})},eT=r(95223),eS=r(21014),eb=r(22812),eg=r(46776),eA=r(80188),eN=r(88281);function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ey=(0,eg.Pi)(function(e){var t,r=e.template,n=e.authConfig,s=(0,et.oR)().ui,o=(0,i.UO)().ref,c=(0,Q._)(),l=c.mutate,u=c.isLoading,d=r.id,p=r.properties,h="auth-config-email-templates-".concat(d),E=(0,K.useMemo)(function(){var e={};return Object.keys(p).forEach(function(t){var r;e[t]=null!==(r=n&&n[t])&&void 0!==r?r:""}),e},[n,p]),f=(0,et.Xo)(B.KA.UPDATE,"custom_config_gotrue"),m="MAILER_TEMPLATES_".concat(d,"_CONTENT"),_=p[m],T=(0,K.useState)(null!==(t=n&&n[m])&&void 0!==t?t:""),S=T[0],b=T[1];return(0,ed.jsx)(z.Z,{id:h,className:"!border-t-0",initialValues:E,onSubmit:function(e,t){var r=t.resetForm,n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);delete n[m],_&&(n[m]=S),l({projectRef:o,config:n},{onError:function(){s.setNotification({category:"error",message:"Failed to update settings"})},onSuccess:function(){s.setNotification({category:"success",message:"Successfully updated settings"}),r({values:e,initialValues:e})}})},children:function(e){var t,r=e.resetForm,i=e.values,s=e.initialValues,o=null!==(t=n&&n[m])&&void 0!==t?t:"",c=JSON.stringify(i)!==JSON.stringify(s)||o!==S;return(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsx)(a.hj,{className:"!border-t-0 pb-8 pt-4",children:(0,ed.jsx)(a.B4,{loading:!1,children:Object.keys(p).map(function(e){var t=p[e];if("string"===t.type)return(0,ed.jsxs)("div",{className:"space-y-3",children:[(0,ed.jsx)("label",{className:"col-span-12 text-sm text-foreground lg:col-span-5",children:t.title}),(0,ed.jsx)($.Z,{size:"small",layout:"vertical",id:e,name:e,descriptionText:t.description?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.description}):null,labelOptional:t.descriptionOptional?(0,ed.jsx)(F.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.descriptionOptional}):null,disabled:!f},e)]},e)})})}),(0,ed.jsx)(a.hj,{className:"!mt-0 grid-cols-12 !border-t-0 !pt-0",children:(0,ed.jsxs)(a.B4,{fullWidth:!0,loading:!1,children:[_&&(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsxs)("div",{className:"space-y-3",children:[(0,ed.jsx)(a.S0,{children:(0,ed.jsx)("span",{children:_.title})}),(0,ed.jsx)(eN.Z,{defaultVisibility:!0,title:"Message variables",hideCollapse:!1,description:_.description&&(0,ed.jsx)(F.D,{children:_.description})})]}),(0,ed.jsx)("div",{className:"relative h-96",children:(0,ed.jsx)(eA.ZP,{id:"code-id",language:"html",isReadOnly:!f,className:"!mb-0 h-96 overflow-hidden rounded border",onInputChange:function(e){return b(null!=e?e:"")},options:{wordWrap:"off",contextmenu:!1},value:S})})]}),(0,ed.jsx)("div",{className:"col-span-12 flex w-full",children:(0,ed.jsx)(a.iN,{handleReset:function(){var e;r({values:n,initialValues:n}),b(null!==(e=n&&n[m])&&void 0!==e?e:"")},form:h,isSubmitting:u,hasChanges:c,disabled:!f,helper:f?void 0:"You need additional permissions to update authentication settings"})})]})})]})}})}),ej=function(){return(0,ed.jsxs)(s.bZ,{variant:"warning",children:[(0,ed.jsx)(Y.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"Built-in email service is rate-limited!"}),(0,ed.jsxs)(s.X,{children:["You're using the built-in email service. The service has rate limits and it's not meant to be used for production apps. Check the"," ",(0,ed.jsx)("a",{href:"https://supabase.com/docs/guides/platform/going-into-prod#auth-rate-limits",className:"underline",target:"_blank",children:"documentation"})," ","for an up-to-date information on the current rate limits. Please use a custom SMTP server if you're planning on having large number of users."]})]})},ev=function(){var e=(0,i.UO)().ref,t=(0,l.$E)({projectRef:e}),r=t.data,n=t.error,c=t.isLoading,u=t.isError,d=t.isSuccess,p=d&&r&&(!r.SMTP_HOST||!r.SMTP_USER||!r.SMTP_PASS);return(0,ed.jsxs)("div",{children:[(0,ed.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ed.jsx)(a.ph,{title:"Email Templates",description:"Customize the emails that will be sent out to your users."}),(0,ed.jsx)("div",{className:"mb-6",children:(0,ed.jsx)(J.z,{type:"default",icon:(0,ed.jsx)(eT.Z,{size:14,strokeWidth:1.5}),children:(0,ed.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/auth/auth-email-templates",children:"Documentation"})})})]}),u&&(0,ed.jsxs)(s.bZ,{variant:"destructive",children:[(0,ed.jsx)(o.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"Failed to retrieve auth configuration"}),(0,ed.jsx)(s.X,{children:n.message})]}),c&&(0,ed.jsx)(eb.A,{}),d&&(0,ed.jsx)(a.by,{children:(0,ed.jsx)(eS.Z,{scrollable:!0,size:"small",type:"underlined",listClassNames:"px-8 pt-4",defaultActiveId:X[0].title.trim().replace(/\s+/g,"-"),children:X.map(function(e){var t=e.title.trim().replace(/\s+/g,"-");return(0,ed.jsxs)(eS.Z.Panel,{id:t,label:e.title,children:[p?(0,ed.jsx)("div",{className:"mx-8",children:(0,ed.jsx)(ej,{})}):null,(0,ed.jsx)(ey,{template:e,authConfig:r},e.title)]},t)})})})]})},ex={SMTP_ADMIN_EMAIL:null,SMTP_SENDER_NAME:null,SMTP_USER:null,SMTP_HOST:null,SMTP_PASS:null,SMTP_PORT:null,SMTP_MAX_FREQUENCY:60},eL=r(50838),eR=(0,eg.Pi)(function(){var e=(0,et.oR)().ui,t=(0,i.UO)().ref,r=(0,l.$E)({projectRef:t}),n=r.data,c=r.error,p=r.isLoading,h=r.isError,E=r.isSuccess,f=(0,Q._)(),m=f.mutate,_=f.isLoading,T=(0,K.useState)(!1),S=T[0],b=T[1],g=(0,K.useState)(!0),A=g[0],N=g[1],O="auth-config-smtp-form",y=(0,eL.F)(n),j=(0,et.Xo)(B.KA.UPDATE,"custom_config_gotrue");(0,K.useEffect)(function(){E&&(0,eL.n)(n)&&b(!0)},[E,n]);var v=(0,u.object)({SMTP_ADMIN_EMAIL:(0,u.string)().when([],{is:function(){return S},then:function(e){return e.email("Must be a valid email").required("Sender email is required")},otherwise:function(e){return e}}),SMTP_SENDER_NAME:(0,u.string)().when([],{is:function(){return S},then:function(e){return e.required("Sender name is required")},otherwise:function(e){return e}}),SMTP_HOST:(0,u.string)().when([],{is:function(){return S},then:function(e){return e.matches(d.y,"Must be a valid URL or IP address").required("Host URL is required.")},otherwise:function(e){return e}}),SMTP_PORT:(0,u.number)().when([],{is:function(){return S},then:function(e){return e.required("Port number is required.").min(1,"Must be a valid port number more than 0").max(65535,"Must be a valid port number no more than 65535")},otherwise:function(e){return e}}),SMTP_MAX_FREQUENCY:(0,u.number)().when([],{is:function(){return S},then:function(e){return e.required("Rate limit is required.").min(1,"Must be more than 0").max(32767,"Must not be more than 32,767 an hour")},otherwise:function(e){return e}}),SMTP_USER:(0,u.string)().when([],{is:function(){return S},then:function(e){return e.required("SMTP Username is required")},otherwise:function(e){return e}}),SMTP_PASS:(0,u.string)().when([],{is:function(){return S},then:function(e){return e.required("SMTP password is required")},otherwise:function(e){return e}})});return h?(0,ed.jsxs)(s.bZ,{variant:"destructive",children:[(0,ed.jsx)(o.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"Failed to retrieve auth configuration"}),(0,ed.jsx)(s.X,{children:c.message})]}):(0,ed.jsx)(z.Z,{id:O,initialValues:y,onSubmit:function(r,n){var i=n.resetForm,s=S?r:ex;delete s.ENABLE_SMTP,s.SMTP_PORT=s.SMTP_PORT?s.SMTP_PORT.toString():s.SMTP_PORT,m({projectRef:t,config:s},{onError:function(t){e.setNotification({category:"error",message:"Failed to update settings",error:t})},onSuccess:function(){N(!0);var t=(0,eL.F)(s);i({values:t,initialValues:t}),e.setNotification({category:"success",message:"Successfully updated settings"})}})},validationSchema:v,children:function(e){var t=e.resetForm,r=e.values,i=(0,eL.n)(r),o=JSON.stringify(r)!==JSON.stringify(y);return(0,K.useEffect)(function(){if(E){var e=(0,eL.F)(n);t({values:e,initialValues:e})}},[E,n]),(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsx)(a.ph,{title:"SMTP Settings",description:"You can use your own SMTP server instead of the built-in email service."}),(0,ed.jsxs)(a.by,{footer:(0,ed.jsx)("div",{className:"flex py-4 px-8",children:(0,ed.jsx)(a.iN,{form:O,isSubmitting:_,hasChanges:o,handleReset:function(){b((0,eL.n)(y)),t({values:y})},disabled:!j,helper:j?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,ed.jsx)(a.hj,{children:(0,ed.jsx)(a.B4,{loading:p,children:(0,ed.jsx)(el.Z,{name:"ENABLE_SMTP",size:"small",label:"Enable Custom SMTP",layout:"flex",checked:S,disabled:!j,onChange:function(e){return b(e)},descriptionText:"Emails will be sent using your custom SMTP provider"})})}),S?!i&&(0,ed.jsx)("div",{className:"mx-8 mb-8 -mt-4",children:(0,ed.jsxs)(s.bZ,{variant:"warning",children:[(0,ed.jsx)(Y.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"All fields below must be filled"}),(0,ed.jsx)(s.X,{children:"The following fields must be filled before custom SMTP can be properly enabled"})]})}):(0,ed.jsx)("div",{className:"mx-8 mb-8 -mt-4",children:(0,ed.jsx)(ej,{})}),(0,ed.jsx)(a.hj,{visible:S,header:(0,ed.jsx)(a.S0,{children:"Sender details"}),disabled:!S,children:(0,ed.jsxs)(a.B4,{loading:p,children:[(0,ed.jsx)($.Z,{name:"SMTP_ADMIN_EMAIL",id:"SMTP_ADMIN_EMAIL",label:"Sender email",descriptionText:"This is the email address the emails are sent from",placeholder:"noreply@yourdomain.com",disabled:!j}),(0,ed.jsx)($.Z,{name:"SMTP_SENDER_NAME",id:"SMTP_SENDER_NAME",label:"Sender name",descriptionText:"Name displayed in the recipient's inbox",placeholder:"The name shown on the email",disabled:!j})]})}),(0,ed.jsx)(a.hj,{visible:S,disabled:!S,header:(0,ed.jsxs)(a.S0,{children:[(0,ed.jsx)("span",{children:"SMTP Provider Settings"}),(0,ed.jsx)("p",{className:"my-4 text-foreground-lighter",children:"Your SMTP Credentials will always be encrypted in our database."})]}),children:(0,ed.jsxs)(a.B4,{loading:p,children:[(0,ed.jsx)($.Z,{name:"SMTP_HOST",placeholder:"your.smtp.host.com",id:"SMTP_HOST",label:"Host",descriptionText:"Hostname or IP address of your SMTP server.",disabled:!j}),(0,ed.jsx)(ec.Z,{name:"SMTP_PORT",id:"SMTP_PORT",placeholder:"587",label:"Port number",descriptionText:(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsxs)("span",{className:"block",children:["Port used by your SMTP server. Common ports include 25, 465, and 587."," "]}),(0,ed.jsx)("span",{className:"mt-2 block",children:"Avoid using port 25 as modern SMTP email clients shouldn't use this port, it is traditionally blocked by residential ISPs and Cloud Hosting Providers, to curb the amount of spam."})]}),disabled:!j}),(0,ed.jsx)(ec.Z,{id:"SMTP_MAX_FREQUENCY",name:"SMTP_MAX_FREQUENCY",label:"Minimum interval between emails being sent",descriptionText:"How long between each email can a new email be sent via your SMTP server.",actions:(0,ed.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!j}),(0,ed.jsx)($.Z,{name:"SMTP_USER",id:"SMTP_USER",label:"Username",placeholder:"SMTP Username",disabled:!j}),(0,ed.jsx)($.Z,{name:"SMTP_PASS",id:"SMTP_PASS",type:A?"password":"text",label:"Password",placeholder:"SMTP Password",actions:(0,ed.jsx)(J.z,{icon:A?(0,ed.jsx)(eo.Z,{}):(0,ed.jsx)(ea.Z,{}),type:"default",onClick:function(){return N(!A)}}),disabled:!j})]})})]})]})}})}),ew=r(60229),eI=r(72047),eD=r(97415);function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eP=(0,u.object)({DISABLE_SIGNUP:(0,u.boolean)().required(),SITE_URL:(0,u.string)().required("Must have a Site URL"),SECURITY_CAPTCHA_ENABLED:(0,u.boolean)().required(),SECURITY_CAPTCHA_SECRET:(0,u.string)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:(0,u.string)().required("Must have a Captcha secret")}),SECURITY_CAPTCHA_PROVIDER:(0,u.string)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:(0,u.string)().oneOf(["hcaptcha","turnstile"]).required("Captcha provider must be either hcaptcha or turnstile")}),SESSIONS_TIMEBOX:(0,u.number)().min(0,"Must be a positive number"),SESSIONS_INACTIVITY_TIMEOUT:(0,u.number)().min(0,"Must be a positive number")});function eM(e){var t=e.value;return 0===t?"never":1===t?"hour":"hours"}var ek=(0,eg.Pi)(function(){var e,t=(0,et.oR)().ui,r=(0,i.UO)().ref,n=(0,l.$E)({projectRef:r}),c=n.data,u=n.error,d=n.isLoading,p=n.isError,h=n.isSuccess,E=(0,Q._)(),f=E.mutate,m=E.isLoading,_="auth-config-basic-settings",T=(0,K.useState)(!0),S=T[0],b=T[1],g=(0,et.Xo)(B.KA.UPDATE,"custom_config_gotrue"),A=(0,et.lL)(),N=(0,eD.G)({orgSlug:A.slug}),O=N.data,y=N.isSuccess&&(null==O?void 0:null===(e=O.plan)||void 0===e?void 0:e.id)!=="free",j={DISABLE_SIGNUP:!(null!=c&&c.DISABLE_SIGNUP),SITE_URL:null==c?void 0:c.SITE_URL,SECURITY_CAPTCHA_ENABLED:(null==c?void 0:c.SECURITY_CAPTCHA_ENABLED)||!1,SECURITY_CAPTCHA_SECRET:(null==c?void 0:c.SECURITY_CAPTCHA_SECRET)||"",SECURITY_CAPTCHA_PROVIDER:(null==c?void 0:c.SECURITY_CAPTCHA_PROVIDER)||"hcaptcha",SESSIONS_TIMEBOX:(null==c?void 0:c.SESSIONS_TIMEBOX)||0,SESSIONS_INACTIVITY_TIMEOUT:(null==c?void 0:c.SESSIONS_INACTIVITY_TIMEOUT)||0};return p?(0,ed.jsxs)(s.bZ,{variant:"destructive",children:[(0,ed.jsx)(o.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"Failed to retrieve auth configuration"}),(0,ed.jsx)(s.X,{children:u.message})]}):(0,ed.jsx)(z.Z,{id:_,initialValues:j,onSubmit:function(e,n){var i=n.resetForm,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);s.DISABLE_SIGNUP=!e.DISABLE_SIGNUP,f({projectRef:r,config:s},{onError:function(e){t.setNotification({category:"error",message:"Failed to update settings:  ".concat(null==e?void 0:e.message)})},onSuccess:function(){t.setNotification({category:"success",message:"Successfully updated settings"}),i({values:e,initialValues:e})}})},validationSchema:eP,children:function(e){var t=e.handleReset,n=e.resetForm,i=e.values,s=e.initialValues,o=JSON.stringify(i)!==JSON.stringify(s);return(0,K.useEffect)(function(){h&&n({values:j,initialValues:j})},[h]),(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsx)(a.ph,{title:"Auth Settings",description:"Configure security and user session settings."}),(0,ed.jsxs)(a.by,{disabled:!0,footer:(0,ed.jsx)("div",{className:"flex py-4 px-8",children:(0,ed.jsx)(a.iN,{form:_,isSubmitting:m,hasChanges:o,handleReset:t,disabled:!g,helper:g?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,ed.jsx)(a.hj,{header:(0,ed.jsx)(a.S0,{children:"User Signups"}),children:(0,ed.jsx)(a.B4,{loading:d,children:(0,ed.jsx)(el.Z,{id:"DISABLE_SIGNUP",size:"small",label:"Allow new users to sign up",layout:"flex",descriptionText:"If this is disabled, new users will not be able to sign up to your application.",disabled:!g})})}),(0,ed.jsx)("div",{className:"border-t border-muted"}),(0,ed.jsx)(a.hj,{header:(0,ed.jsx)(a.S0,{children:"User Sessions"}),children:(0,ed.jsxs)(a.B4,{loading:d,children:[y?(0,ed.jsx)(ed.Fragment,{}):(0,ed.jsx)(eI.Z,{primaryText:"Upgrade to Pro",secondaryText:"Configuring user sessions requires the Pro plan.",projectRef:r,organizationSlug:A.slug}),(0,ed.jsx)(ec.Z,{id:"SESSIONS_TIMEBOX",size:"small",label:"Time-box user sessions",descriptionText:"How long before a user is forced to log in again, use 0 for never",actions:(0,ed.jsx)("span",{className:"mr-3 text-foreground-lighter",children:(0,ed.jsx)(eM,{value:i.SESSIONS_TIMEBOX})}),disabled:!g||!y}),(0,ed.jsx)(ec.Z,{id:"SESSIONS_INACTIVITY_TIMEOUT",size:"small",label:"Inactivity timeout",descriptionText:"How long users need to be inactive to be forced to log in again, use 0 for never",actions:(0,ed.jsx)("span",{className:"mr-3 text-foreground-lighter",children:(0,ed.jsx)(eM,{value:i.SESSIONS_INACTIVITY_TIMEOUT})}),disabled:!g||!y})]})}),(0,ed.jsx)("div",{className:"border-t border-scale-400"}),(0,ed.jsx)(a.hj,{header:(0,ed.jsx)(a.S0,{children:"Bot and Abuse Protection"}),children:(0,ed.jsxs)(a.B4,{loading:d,children:[(0,ed.jsx)(el.Z,{id:"SECURITY_CAPTCHA_ENABLED",size:"small",label:"Enable Captcha protection",layout:"flex",descriptionText:"Protect authentication endpoints from bots and abuse.",disabled:!g}),i.SECURITY_CAPTCHA_ENABLED&&(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsxs)(ew.Z.Group,{id:"SECURITY_CAPTCHA_PROVIDER",name:"SECURITY_CAPTCHA_PROVIDER",label:"Choose Captcha Provider",children:[(0,ed.jsx)(ew.Z,{label:"hCaptcha",value:"hcaptcha",checked:"hcaptcha"===i.SECURITY_CAPTCHA_PROVIDER}),(0,ed.jsx)(ew.Z,{label:"Turnstile by Cloudflare",value:"turnstile",checked:"turnstile"===i.SECURITY_CAPTCHA_PROVIDER})]}),(0,ed.jsx)($.Z,{id:"SECURITY_CAPTCHA_SECRET",type:S?"password":"text",size:"small",label:"Captcha secret",descriptionText:"Obtain this secret from the provider.",disabled:!g,actions:(0,ed.jsx)(J.z,{icon:S?(0,ed.jsx)(eo.Z,{}):(0,ed.jsx)(ea.Z,{}),type:"default",onClick:function(){return b(!S)}})})]})]})})]})]})}})});function eX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eU=(0,u.object)({JWT_EXP:(0,u.number)().max(604800,"Must be less than 604800").required("Must have a JWT expiry value"),REFRESH_TOKEN_ROTATION_ENABLED:(0,u.boolean)().required(),SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:(0,u.number)().min(0,"Must be a value more than 0").required("Must have a Reuse Interval value"),MFA_MAX_ENROLLED_FACTORS:(0,u.number)().min(0,"Must be be a value more than 0").max(30,"Must be a value less than 30")}),eZ=(0,eg.Pi)(function(){var e=(0,et.oR)().ui,t=(0,i.UO)().ref,r=(0,l.$E)({projectRef:t}),n=r.data,c=r.error,u=r.isLoading,d=r.isError,p=r.isSuccess,h=(0,Q._)(),E=h.mutate,f=h.isLoading,m="auth-config-advanced-form",_=(0,et.Xo)(B.KA.UPDATE,"custom_config_gotrue"),T={SITE_URL:null==n?void 0:n.SITE_URL,JWT_EXP:null==n?void 0:n.JWT_EXP,REFRESH_TOKEN_ROTATION_ENABLED:(null==n?void 0:n.REFRESH_TOKEN_ROTATION_ENABLED)||!1,SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:null==n?void 0:n.SECURITY_REFRESH_TOKEN_REUSE_INTERVAL,MFA_MAX_ENROLLED_FACTORS:(null==n?void 0:n.MFA_MAX_ENROLLED_FACTORS)||10};return d?(0,ed.jsxs)(s.bZ,{variant:"destructive",children:[(0,ed.jsx)(o.Z,{strokeWidth:2}),(0,ed.jsx)(s.Cd,{children:"Failed to retrieve auth configuration"}),(0,ed.jsx)(s.X,{children:c.message})]}):(0,ed.jsx)(z.Z,{id:m,initialValues:T,onSubmit:function(r,n){var i=n.resetForm;E({projectRef:t,config:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r)},{onError:function(t){e.setNotification({category:"error",message:"Failed to update settings:  ".concat(null==t?void 0:t.message)})},onSuccess:function(){e.setNotification({category:"success",message:"Successfully updated settings"}),i({values:r,initialValues:r})}})},validationSchema:eU,children:function(e){var t=e.handleReset,r=e.resetForm,n=e.values,i=e.initialValues,s=JSON.stringify(n)!==JSON.stringify(i);return(0,K.useEffect)(function(){p&&r({values:T,initialValues:T})},[p]),(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsx)(a.ph,{title:"Advanced Settings",description:"These settings rarely need to be changed."}),(0,ed.jsxs)(a.by,{disabled:!0,footer:(0,ed.jsx)("div",{className:"flex py-4 px-8",children:(0,ed.jsx)(a.iN,{form:m,isSubmitting:f,hasChanges:s,handleReset:t,disabled:!_,helper:_?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,ed.jsx)(a.hj,{header:(0,ed.jsx)(a.S0,{children:"Access Tokens (JWT)"}),children:(0,ed.jsx)(a.B4,{loading:u,children:(0,ed.jsx)(ec.Z,{id:"JWT_EXP",size:"small",label:"Access token (JWT) expiry time",descriptionText:"How long access tokens are valid for before a refresh token has to be used. Recommendation: 3600 (1 hour).",actions:(0,ed.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!_})})}),(0,ed.jsx)(a.hj,{header:(0,ed.jsx)(a.S0,{children:"Refresh Tokens"}),children:(0,ed.jsxs)(a.B4,{loading:u,children:[(0,ed.jsx)(el.Z,{id:"REFRESH_TOKEN_ROTATION_ENABLED",size:"small",label:"Detect and revoke potentially compromised refresh tokens",layout:"flex",descriptionText:"Prevent replay attacks from potentially compromised refresh tokens. Recommendation: ON.",disabled:!_}),n.REFRESH_TOKEN_ROTATION_ENABLED&&(0,ed.jsx)(ec.Z,{id:"SECURITY_REFRESH_TOKEN_REUSE_INTERVAL",size:"small",min:0,label:"Refresh token reuse interval",descriptionText:"Time interval where the same refresh token can be used multiple times to request for an access token. Recommendation: 10 seconds.",actions:(0,ed.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!_})]})}),(0,ed.jsx)(a.hj,{header:(0,ed.jsx)(a.S0,{children:"Multi-Factor Authentication (MFA)"}),children:(0,ed.jsx)(a.B4,{loading:u,children:(0,ed.jsx)(ec.Z,{id:"MFA_MAX_ENROLLED_FACTORS",size:"small",label:"Maximum number of per-user MFA factors",descriptionText:"How many MFA factors can be enrolled at once per user.",disabled:!_})})})]})]})}})}),eq=r(55210),eB=r(59227),eK=r(25149),eF=r(51422),eV=r(97064),eH=r(38477),eG=r(82269),ez=r(20406),eY=r(28526),eW=r.n(eY),e$=r(58943),eJ=r(81229),eQ=r(24770),e0=["enabled"];function e2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e1(){return(e1=(0,ez.Z)(eW().mark(function e(t,r){var n,i,s,o,a,c,l,u,d,p;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef,s=void 0===(i=t.page)?1:i,a=void 0===(o=t.keywords)?"":o,c=t.verified,n){e.next=3;break}throw Error("Project ref is required");case 3:return l={limit:"10",offset:((s-1)*10).toString(),keywords:a},c&&(l.verified=c),e.next=9,(0,eJ.U2)("/platform/auth/{ref}/users",{params:{path:{ref:n},query:l},signal:r});case 9:if(d=(u=e.sent).data,!(p=u.error)){e.next=14;break}throw p;case 14:return e.abrupt("return",d);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}var e3=function(e){var t=e.projectRef,r=e.page,n=e.keywords,i=e.verified,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.enabled,a=(0,eG.Z)(s,e0);return(0,e$.a)(eQ.o.users(t,{page:r,keywords:n,verified:i}),function(e){return function(e,t){return e1.apply(this,arguments)}({projectRef:t,page:r,keywords:n,verified:i},e.signal)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e2(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({enabled:(void 0===o||o)&&void 0!==t},a))},e6=r(4678),e4=r.n(e6),e5=r(93306),e9=r(77740),e8=r(15688),e7=r(13980),te=r.n(e7);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var tr=(0,K.forwardRef)(function(e,t){var r=e.color,n=e.size,i=void 0===n?24:n,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["color","size"]);return K.createElement("svg",tt({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),K.createElement("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),K.createElement("circle",{cx:"8.5",cy:"7",r:"4"}),K.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),K.createElement("line",{x1:"23",y1:"11",x2:"17",y2:"11"}))});tr.propTypes={color:te().string,size:te().oneOfType([te().string,te().number])},tr.displayName="UserPlus";var tn=r(12223);function ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ts=function(e){return(0,ed.jsx)(tn.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ti(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({icon:tr},e))},to=r(36849),ta=r(3929),tc=r(22962),tl=r(41503),tu=r(55830),td=r(62350),tp=r(62202),th=r(37552),tE=["onSuccess","onError"];function tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tm(){return(tm=(0,ez.Z)(eW().mark(function e(t){var r,n,i,s,o;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.protocol,n=t.endpoint,i=t.serviceApiKey,s=t.user,e.next=3,(0,th.v_)("".concat(r,"://").concat(n,"/auth/v1/admin/users"),{email:s.email,password:s.password,email_confirm:s.autoConfirmUser},{headers:{apikey:i,Authorization:"Bearer ".concat(i)}});case 3:if(!(o=e.sent).error){e.next=6;break}throw o.error;case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var t_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,eG.Z)(e,tE),i=(0,tu.NL)();return(0,td.D)(function(e){return function(e){return tm.apply(this,arguments)}(e)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onSuccess:function(e,r,n){return(0,ez.Z)(eW().mark(function s(){var o;return eW().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(o=r.projectRef)){s.next=4;break}return s.next=4,i.invalidateQueries(eQ.o.users(o));case 4:return s.next=6,null==t?void 0:t(e,r,n);case 6:case"end":return s.stop()}},s)}))()},onError:function(e,t,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?tp.ZP.error("Failed to create user: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))},tT=r(31941),tS=(0,eg.Pi)(function(e){var t,r=e.visible,n=e.setVisible,s=(0,et.oR)().ui,o=(0,i.UO)().ref,a=(0,tT.qP)({projectRef:o},{enabled:r}),c=a.data,l=a.isLoading,u=a.isSuccess,d=(0,et.Xo)(B.KA.AUTH_EXECUTE,"create_user"),p=t_({onSuccess:function(e){return(0,ez.Z)(eW().mark(function t(){return eW().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s.setNotification({category:"success",message:"Successfully created user: ".concat(e.email)}),n(!1);case 2:case"end":return t.stop()}},t)}))()}}),h=p.mutate,E=p.isLoading,f=(t=(0,ez.Z)(eW().mark(function e(t){var r,n;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",s.setNotification({category:"error",message:"Failed to create user: Error loading project config"}));case 2:n=(r=c.autoApiService).protocol,h({projectRef:o,endpoint:r.endpoint,protocol:n,serviceApiKey:r.serviceApiKey,user:t});case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return(0,ed.jsx)(to.C,{closable:!0,hideFooter:!0,size:"small",visible:r,header:"Create a new user",onCancel:function(){return n(!r)},loading:!0,children:(0,ed.jsx)(z.Z,{validateOnBlur:!1,initialValues:{email:"",password:"",autoConfirmUser:!0},validate:function(e){var t,r={};return 0===e.email.length?r.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(r.email="".concat(e.email," is an invalid email")),null!==(t=e.password)&&void 0!==t&&t.trim()||(r.password="Please enter a password"),r},onSubmit:f,children:function(){return(0,ed.jsx)(ta.Z,{active:l,children:(0,ed.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ed.jsx)(to.C.Content,{children:(0,ed.jsxs)("div",{className:"space-y-4",children:[(0,ed.jsx)($.Z,{id:"email",autoComplete:"off",label:"User Email",icon:(0,ed.jsx)(e8.Z,{}),type:"email",name:"email",placeholder:"user@example.com",disabled:E||l}),(0,ed.jsx)($.Z,{id:"password",name:"password",type:"password",label:"User Password",placeholder:"••••••••",icon:(0,ed.jsx)(tc.Z,{}),disabled:E||l,autoComplete:"new-password"}),(0,ed.jsx)(tl.Z,{value:"true",id:"autoConfirmUser",name:"autoConfirmUser",label:"Auto Confirm User?",size:"medium",description:"Creates the user without sending them a confirmation email",defaultChecked:!0,disabled:E||l})]})}),(0,ed.jsx)(to.C.Content,{children:(0,ed.jsx)(J.z,{block:!0,size:"small",htmlType:"submit",loading:E,disabled:!d||E||l,children:"Create user"})})]})})}})},"create-user-modal")}),tb=["onSuccess","onError"];function tg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tA(){return(tA=(0,ez.Z)(eW().mark(function e(t){var r,n,i;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.email,e.next=3,(0,th.v_)("".concat(er.T5,"/auth/").concat(r,"/invite"),{email:n});case 3:if(!(i=e.sent).error){e.next=6;break}throw i.error;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,eG.Z)(e,tb),i=(0,tu.NL)();return(0,td.D)(function(e){return function(e){return tA.apply(this,arguments)}(e)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onSuccess:function(e,r,n){return(0,ez.Z)(eW().mark(function s(){var o;return eW().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o=r.projectRef,s.next=3,i.invalidateQueries(eQ.o.users(o));case 3:return s.next=5,null==t?void 0:t(e,r,n);case 5:case"end":return s.stop()}},s)}))()},onError:function(e,t,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?tp.ZP.error("Failed to invite user: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))},tO=(0,eg.Pi)(function(e){var t,r=e.visible,n=e.setVisible,s=(0,et.oR)().ui,o=(0,i.UO)().ref,a=tN(),c=a.mutateAsync,l=a.isLoading,u=(0,et.Xo)(B.KA.AUTH_EXECUTE,"invite_user"),d=(t=(0,ez.Z)(eW().mark(function e(t){return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",console.error("Project ref is required"));case 2:return e.next=4,c({projectRef:o,email:t.email});case 4:s.setNotification({category:"success",message:"Sent invite email to ".concat(t.email)}),n(!1);case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return(0,ed.jsx)("div",{children:(0,ed.jsx)(to.C,{closable:!0,hideFooter:!0,size:"small",visible:r,header:"Invite a new user",onCancel:function(){return n(!r)},children:(0,ed.jsx)(z.Z,{validateOnBlur:!1,initialValues:{email:""},validate:function(e){var t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:d,children:function(){return(0,ed.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ed.jsx)(to.C.Content,{children:(0,ed.jsx)($.Z,{id:"email",className:"w-full",label:"User email",icon:(0,ed.jsx)(e8.Z,{}),type:"email",name:"email",placeholder:"User email"})}),(0,ed.jsx)(to.C.Content,{children:(0,ed.jsx)(J.z,{block:!0,size:"small",htmlType:"submit",loading:l,disabled:!u||l,children:"Invite user"})})]})}})},"invite-user-modal")})}),ty=function(e){var t=e.projectKpsVersion,r=!er.Qy||e4().gte(e4().coerce(null!=t?t:"kps-v2.5.4"),e4().coerce("kps-v2.5.3")),n=(0,et.Xo)(B.KA.AUTH_EXECUTE,"invite_user"),i=(0,et.Xo)(B.KA.AUTH_EXECUTE,"create_user"),s=(0,K.useState)(!1),o=s[0],a=s[1],c=(0,K.useState)(!1),l=c[0],u=c[1];return(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsxs)(e5.h_,{children:[(0,ed.jsx)(e5.$F,{children:(0,ed.jsx)(J.z,{type:"primary",iconRight:(0,ed.jsx)(e9.Z,{strokeWidth:1.5}),children:"Add user"})}),(0,ed.jsxs)(e5.AW,{side:"bottom",align:"end",children:[r&&(0,ed.jsxs)(q.fC,{delayDuration:0,children:[(0,ed.jsx)(q.xz,{className:"w-full",children:(0,ed.jsxs)(e5.Xi,{className:"space-x-2",disabled:!n,onClick:function(){return a(!0)},children:[(0,ed.jsx)(e8.Z,{size:"small"}),(0,ed.jsx)("p",{children:"Send invitation"})]})}),!n&&(0,ed.jsx)(q.h_,{children:(0,ed.jsxs)(q.VY,{side:"bottom",children:[(0,ed.jsx)(q.Eh,{className:"radix-tooltip-arrow"}),(0,ed.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,ed.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to invite users"})})]})})]}),(0,ed.jsxs)(q.fC,{delayDuration:0,children:[(0,ed.jsx)(q.xz,{className:"w-full text-left",children:(0,ed.jsxs)(e5.Xi,{className:"space-x-2",disabled:!i,onClick:function(){return u(!0)},children:[(0,ed.jsx)(ts,{size:"small"}),(0,ed.jsx)("p",{children:"Create new user"})]})}),!i&&(0,ed.jsx)(q.h_,{children:(0,ed.jsxs)(q.VY,{side:"bottom",children:[(0,ed.jsx)(q.Eh,{className:"radix-tooltip-arrow"}),(0,ed.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,ed.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to create users"})})]})})]})]})]}),r&&(0,ed.jsx)(tO,{visible:o,setVisible:a}),(0,ed.jsx)(tS,{visible:l,setVisible:u})]})},tj=r(55268),tv=r(73302),tx=r(981),tL=r(13734),tR=["onSuccess","onError"];function tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tI(){return(tI=(0,ez.Z)(eW().mark(function e(t){var r,n,i;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.userId,e.next=3,(0,th.$v)("".concat(er.T5,"/auth/").concat(r,"/users/").concat(n,"/factors"));case 3:if(!(i=e.sent).error){e.next=6;break}throw i.error;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tD=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,eG.Z)(e,tR);return(0,td.D)(function(e){return function(e){return tI.apply(this,arguments)}(e)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tw(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onSuccess:function(e,r,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,null==t?void 0:t(e,r,n);case 2:case"end":return i.stop()}},i)}))()},onError:function(e,t,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?tp.ZP.error("Failed to delete user MFA factors: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))},tC=["onSuccess","onError"];function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tM(){return(tM=(0,ez.Z)(eW().mark(function e(t){var r,n,i;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.user,e.next=3,(0,th.$v)("".concat(er.T5,"/auth/").concat(r,"/users"),n);case 3:if(!(i=e.sent).error){e.next=6;break}throw i.error;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,eG.Z)(e,tC),i=(0,tu.NL)();return(0,td.D)(function(e){return function(e){return tM.apply(this,arguments)}(e)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onSuccess:function(e,r,n){return(0,ez.Z)(eW().mark(function s(){var o;return eW().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o=r.projectRef,s.next=3,i.invalidateQueries(eQ.o.users(o));case 3:return s.next=5,null==t?void 0:t(e,r,n);case 5:case"end":return s.stop()}},s)}))()},onError:function(e,t,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?tp.ZP.error("Failed to delete user: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))},tX=["onSuccess","onError"];function tU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tZ(){return(tZ=(0,ez.Z)(eW().mark(function e(t){var r,n,i;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.user,e.next=3,(0,th.v_)("".concat(er.T5,"/auth/").concat(r,"/recover"),n);case 3:if(!(i=e.sent).error){e.next=6;break}throw i.error;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tq=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,eG.Z)(e,tX);return(0,td.D)(function(e){return function(e){return tZ.apply(this,arguments)}(e)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tU(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onSuccess:function(e,r,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,null==t?void 0:t(e,r,n);case 2:case"end":return i.stop()}},i)}))()},onError:function(e,t,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?tp.ZP.error("Failed to reset user password: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))},tB=["onSuccess","onError"];function tK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tF(){return(tF=(0,ez.Z)(eW().mark(function e(t){var r,n,i;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.user,e.next=3,(0,th.v_)("".concat(er.T5,"/auth/").concat(r,"/magiclink"),n);case 3:if(!(i=e.sent).error){e.next=6;break}throw i.error;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tV=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,eG.Z)(e,tB);return(0,td.D)(function(e){return function(e){return tF.apply(this,arguments)}(e)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tK(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onSuccess:function(e,r,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,null==t?void 0:t(e,r,n);case 2:case"end":return i.stop()}},i)}))()},onError:function(e,t,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?tp.ZP.error("Failed to send magic link: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))},tH=["onSuccess","onError"];function tG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tz(){return(tz=(0,ez.Z)(eW().mark(function e(t){var r,n,i;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.user,e.next=3,(0,th.v_)("".concat(er.T5,"/auth/").concat(r,"/otp"),n);case 3:if(!(i=e.sent).error){e.next=6;break}throw i.error;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,eG.Z)(e,tH);return(0,td.D)(function(e){return function(e){return tz.apply(this,arguments)}(e)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tG(Object(r),!0).forEach(function(t){(0,Z.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({onSuccess:function(e,r,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,null==t?void 0:t(e,r,n);case 2:case"end":return i.stop()}},i)}))()},onError:function(e,t,n){return(0,ez.Z)(eW().mark(function i(){return eW().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?tp.ZP.error("Failed to send magic link: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))},tW=r(210),t$=r(77961),tJ=r(92632),tQ=r(77426),t0=r(15659),t2=function(e){var t,r=e.user,n=e.canRemoveUser,s=e.canRemoveMFAFactors,o=(0,et.oR)().ui,a=(0,i.UO)().ref,c=tq({onSuccess:function(){o.setNotification({category:"success",message:"Sent password recovery to ".concat(r.email)})}}),l=c.mutate,u=c.isLoading,d=tV({onSuccess:function(){o.setNotification({category:"success",message:"Sent magic link to ".concat(r.email)})}}),p=d.mutate,h=d.isLoading,E=tY({onSuccess:function(){o.setNotification({category:"success",message:"Sent OTP to ".concat(r.phone)})}}),f=E.mutate,m=E.isLoading,_=tk(),T=_.mutateAsync,S=_.isLoading,b=tD(),g=b.mutateAsync,A=b.isLoading,N=(t=(0,ez.Z)(eW().mark(function e(){return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",console.error("Project ref is required"));case 2:l({projectRef:a,user:r});case 3:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});function O(){return(O=(0,ez.Z)(eW().mark(function e(){return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",console.error("Project ref is required"));case 2:p({projectRef:a,user:r});case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(){return(y=(0,ez.Z)(eW().mark(function e(){return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",console.error("Project ref is required"));case 2:f({projectRef:a,user:r});case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var j=(0,K.useState)(!1),v=j[0],x=j[1];function L(){return(L=(0,ez.Z)(eW().mark(function e(){var t;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,tW.Vs)(200);case 2:if(a){e.next=4;break}return e.abrupt("return",console.error("Project ref is required"));case 4:return e.prev=4,e.next=7,T({projectRef:a,user:r});case 7:o.setNotification({category:"success",message:"Successfully deleted ".concat(r.email)}),x(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),o.setNotification({category:"error",message:null!==(t=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==t?t:"Something went wrong while trying to delete user"});case 14:case"end":return e.stop()}},e,null,[[4,11]])}))).apply(this,arguments)}var R=(0,K.useState)(!1),w=R[0],I=R[1];function D(){return(D=(0,ez.Z)(eW().mark(function e(){var t;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,tW.Vs)(200);case 2:if(a){e.next=4;break}return e.abrupt("return",console.error("Project ref is required"));case 4:if(r.id){e.next=6;break}return e.abrupt("return",console.error("User id is required"));case 6:return e.prev=6,e.next=9,g({projectRef:a,userId:r.id});case 9:o.setNotification({category:"success",message:"Successfully deleted the user's factors"}),I(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),o.setNotification({category:"error",message:null!==(t=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==t?t:"Something went wrong while trying to delete user's factors"});case 16:return e.prev=16,e.finish(16);case 18:case"end":return e.stop()}},e,null,[[6,13,16,18]])}))).apply(this,arguments)}return(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsxs)(e5.h_,{children:[(0,ed.jsx)(e5.$F,{children:(0,ed.jsx)(J.z,{asChild:!0,type:"text",icon:(0,ed.jsx)(t$.Z,{}),loading:u||h||m||S||A,className:"hover:border-gray-500 flex",children:(0,ed.jsx)("span",{})})}),(0,ed.jsx)(e5.AW,{children:(0,ed.jsxs)(ed.Fragment,{children:[null!==r.email?(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsxs)(e5.Xi,{className:"space-x-2",onClick:N,children:[(0,ed.jsx)(e8.Z,{size:"tiny"}),(0,ed.jsx)("p",{children:"Send password recovery"})]}),(0,ed.jsxs)(e5.Xi,{className:"space-x-2",onClick:function(){return O.apply(this,arguments)},children:[(0,ed.jsx)(e8.Z,{size:"tiny"}),(0,ed.jsx)("p",{children:"Send magic link"})]})]}):null,null!==r.phone?(0,ed.jsxs)(e5.Xi,{className:"space-x-2",onClick:function(){return y.apply(this,arguments)},children:[(0,ed.jsx)(e8.Z,{size:"tiny"}),(0,ed.jsx)("p",{children:"Send OTP"})]}):null,(0,ed.jsx)(e5.VD,{}),(0,ed.jsxs)(q.fC,{delayDuration:0,children:[(0,ed.jsx)(q.xz,{asChild:!0,children:(0,ed.jsxs)(e5.Xi,{onClick:function(){I(!0)},disabled:!s,className:"space-x-2",children:[(0,ed.jsx)(tJ.Z,{size:"tiny"}),(0,ed.jsx)("p",{children:"Remove MFA factors"})]})}),!s&&(0,ed.jsx)(q.h_,{children:(0,ed.jsxs)(q.VY,{side:"bottom",children:[(0,ed.jsx)(q.Eh,{className:"radix-tooltip-arrow"}),(0,ed.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,ed.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to remove a user's authentication factors."})})]})})]}),(0,ed.jsxs)(q.fC,{delayDuration:0,children:[(0,ed.jsx)(q.xz,{asChild:!0,children:(0,ed.jsxs)(e5.Xi,{onClick:function(){x(!0)},disabled:!n,className:"space-x-2",children:[(0,ed.jsx)(tQ.Z,{size:"tiny"}),(0,ed.jsx)("p",{children:"Delete user"})]})}),!n&&(0,ed.jsx)(q.h_,{children:(0,ed.jsxs)(q.VY,{side:"bottom",children:[(0,ed.jsx)(q.Eh,{className:"radix-tooltip-arrow"}),(0,ed.jsx)("div",{className:(0,t0.cn)(["rounded bg-alternative py-1 px-2 leading-none shadow","border border-background"]),children:(0,ed.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to delete users"})})]})})]})]})})]}),(0,ed.jsx)(tL.Z,{visible:v,header:"Confirm to delete",buttonLabel:"Delete",onSelectCancel:function(){return x(!1)},onSelectConfirm:function(){!function(){L.apply(this,arguments)}()},children:(0,ed.jsx)(to.C.Content,{children:(0,ed.jsxs)("p",{className:"py-4 text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete user ",r.email,"?"]})})}),(0,ed.jsx)(tL.Z,{visible:w,header:"Confirm to delete",buttonLabel:"Delete",onSelectCancel:function(){return I(!1)},onSelectConfirm:function(){!function(){D.apply(this,arguments)}()},children:(0,ed.jsx)(to.C.Content,{children:(0,ed.jsx)("p",{className:"py-4 text-sm text-foreground-light",children:"This is permanent! Are you sure you want to delete the user's MFA factors?"})})})]})},t1=function(e){return e?es()(e,"YYYY-MM-DD HH:mm:ss.SSSZZ"):void 0},t3=function(e){var t,r=e.user,n=e.canRemoveUser,i=e.canRemoveMFAFactors,s=r.email_confirmed_at||r.phone_confirmed_at,o=t1(r.created_at),a=t1(r.last_sign_in_at);return(0,ed.jsxs)(tj.Z.tr,{className:"relative",children:[(0,ed.jsx)(tj.Z.td,{className:"whitespace-nowrap",children:(0,ed.jsx)("div",{className:"flex items-center gap-2",children:(0,ed.jsx)("span",{className:"text-sm text-foreground",children:r.email?r.email:"-"})})}),(0,ed.jsx)(tj.Z.td,{className:"whitespace-nowrap",children:(0,ed.jsx)("span",{className:"text-foreground",children:r.phone?r.phone:"-"})}),(0,ed.jsx)(tj.Z.td,{className:"table-cell",children:(0,ed.jsx)("span",{className:"capitalize text-foreground",children:null==r?void 0:null===(t=r.raw_app_meta_data)||void 0===t?void 0:t.provider})}),(0,ed.jsx)(tj.Z.td,{className:"table-cell",children:(0,ed.jsx)("span",{className:"text-foreground",children:null==o?void 0:o.format("DD MMM, YYYY HH:mm")})}),(0,ed.jsx)(tj.Z.td,{className:"table-cell",children:s?r.last_sign_in_at?null==a?void 0:a.format("DD MMM, YYYY HH:mm"):"Never":(0,ed.jsx)(tv.Z,{color:"yellow",children:"Waiting for verification.."})}),(0,ed.jsx)(tj.Z.td,{className:"table-cell",children:(0,ed.jsxs)("div",{className:"flex max-w-[72px] items-baseline",children:[(0,ed.jsx)(tx.Z,{metastring:"",className:"font-xs bash",children:r.id}),(0,ed.jsx)("div",{children:"..."})]})}),(0,ed.jsx)(tj.Z.td,{className:"table-cell",children:(0,ed.jsx)(t2,{user:r,canRemoveUser:n,canRemoveMFAFactors:i})})]},r.id)},t6=function(e){var t=e.total,r=e.page,n=e.setPage,i=10*(r-1)+1,s=10*r,o=s>t?t:s,a=r>1,c=o<t;return(0,ed.jsxs)("nav",{className:"flex items-center justify-between overflow-hidden","aria-label":"Pagination",children:[(0,ed.jsx)("div",{className:"hidden sm:block",children:(0,ed.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["Showing",(0,ed.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:i>t?t:i}),"to",(0,ed.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:o}),"of",(0,ed.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:t}),"results"]})}),(0,ed.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[a&&(0,ed.jsx)(J.z,{type:"default",disabled:!a,onClick:function(){return n(r-1)},children:"Previous"}),c&&(0,ed.jsx)(J.z,{type:"default",disabled:!c,className:"ml-3",onClick:function(){return n(r+1)},children:"Next"})]})]})},t4=function(e){var t=e.page,r=e.setPage,n=e.keywords,i=e.total,s=e.users,a=e.isLoading,c=e.isSuccess,l=(0,et.Xo)(B.KA.TENANT_SQL_DELETE,"auth.users"),u=(0,et.Xo)(B.KA.TENANT_SQL_DELETE,"auth.mfa_factors");return(0,ed.jsx)(ta.Z,{active:a,children:(0,ed.jsx)(tj.Z,{head:(0,ed.jsxs)(ed.Fragment,{children:[(0,ed.jsx)(tj.Z.th,{children:"Email"}),(0,ed.jsx)(tj.Z.th,{children:"Phone"}),(0,ed.jsx)(tj.Z.th,{className:"table-cell",children:"Provider"}),(0,ed.jsx)(tj.Z.th,{className:"table-cell",children:"Created"}),(0,ed.jsx)(tj.Z.th,{className:"table-cell",children:"Last Sign In"}),(0,ed.jsx)(tj.Z.th,{className:"table-cell",children:"User UID"}),(0,ed.jsx)(tj.Z.th,{})]}),body:(0,ed.jsxs)(ed.Fragment,{children:[c&&0==s.length&&(0,ed.jsx)(tj.Z.tr,{children:(0,ed.jsx)(tj.Z.td,{colSpan:7,className:"h-14 whitespace-nowrap border-t p-4 text-sm leading-5 text-gray-300",children:(0,ed.jsxs)("div",{className:"flex items-center space-x-3 opacity-75",children:[(0,ed.jsx)(o.Z,{size:16,strokeWidth:2}),(0,ed.jsx)("p",{className:"text-foreground-light",children:n?'No users matched the search query "'.concat(n,'"'):"No users in your project yet"})]})})}),c&&s.length>0&&s.map(function(e){return(0,ed.jsx)(t3,{user:e,canRemoveUser:l,canRemoveMFAFactors:u},e.id)}),(0,ed.jsx)(tj.Z.tr,{children:(0,ed.jsx)(tj.Z.td,{colSpan:7,children:(0,ed.jsx)(t6,{total:i,page:t,setPage:r})})})]})})})},t5=function(){var e,t,r=(0,eV.d2)().project,n=(0,i.UO)().ref,s=(0,eF.cg)(),o=(0,K.useState)(1),a=o[0],c=o[1],l=(0,K.useState)(""),u=l[0],d=l[1],p=(0,K.useState)(""),h=p[0],E=p[1],f=(0,K.useState)(),m=f[0],_=f[1],T=e3({projectRef:n,page:a,keywords:h,verified:m}),S=T.data,b=T.isLoading,g=T.isSuccess,A=T.refetch,N=T.isRefetching;return(0,ed.jsxs)("div",{children:[(0,ed.jsxs)("div",{className:"justify-between px-6 pt-6 pb-2 md:flex",children:[(0,ed.jsxs)("div",{className:"relative flex space-x-4",children:[(0,ed.jsx)($.Z,{size:"small",value:u,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){13==e.keyCode&&E(u)},className:"min-w-[275px]",name:"email",id:"email",placeholder:"Search by email or phone number",icon:(0,ed.jsx)(eq.Z,{size:"tiny"}),actions:[u&&(0,ed.jsx)(J.z,{size:"tiny",type:"text",icon:(0,ed.jsx)(eB.Z,{size:"tiny"}),onClick:function(){d(""),E(""),_(void 0)}})]}),(0,ed.jsxs)(eu.Z,{size:"small",value:m,onChange:function(e){_(e)},name:"verified",id:"verified",className:"w-[200px]",children:[(0,ed.jsx)(eu.Z.Option,{label:"All Users",value:"",children:"All Users"}),(0,ed.jsx)(eu.Z.Option,{label:"Verified Users",value:"verified",children:"Verified Users"}),(0,ed.jsx)(eu.Z.Option,{label:"Un-Verified Users",value:"unverified",children:"Un-Verified Users"})]})]}),(0,ed.jsxs)("div",{className:"mt-4 flex items-center gap-2 md:mt-0",children:[s&&(0,ed.jsx)(eH.Z,{section:["user-management"]}),(0,ed.jsx)(J.z,{size:"tiny",icon:(0,ed.jsx)(eK.Z,{}),type:"default",loading:b||N,onClick:function(){return A()},children:"Reload"}),(0,ed.jsx)(ty,{projectKpsVersion:null==r?void 0:r.kpsVersion})]})]}),(0,ed.jsx)("section",{className:"thin-scrollbars mt-4 overflow-visible px-6",children:(0,ed.jsx)("div",{className:"section-block--body relative overflow-x-auto rounded",children:(0,ed.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,ed.jsx)(t4,{page:a,setPage:c,keywords:h,verified:m,total:null!==(e=null==S?void 0:S.total)&&void 0!==e?e:0,users:null!==(t=null==S?void 0:S.users)&&void 0!==t?t:[],isLoading:b,isSuccess:g})})})})]})}},28861:function(e,t,r){r.d(t,{p:function(){return i}});var n=r(52322),i=function(){return(0,n.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)("div",{className:"shimmering-loader h-6 w-6 rounded-full"}),(0,n.jsx)("div",{className:"shimmering-loader h-2 w-32 rounded"})]}),(0,n.jsx)("div",{className:"shimmering-loader h-6 w-20 rounded"})]})}},57324:function(e,t,r){r.d(t,{_:function(){return _}});var n=r(95235),i=r(82269),s=r(20406),o=r(28526),a=r.n(o),c=r(55830),l=r(62350),u=r(62202),d=r(81229),p=r(24770),h=["onSuccess","onError"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(){return(m=(0,s.Z)(a().mark(function e(t){var r,n,i,s,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.config,e.next=3,(0,d.r$)("/platform/auth/{ref}/config",{params:{path:{ref:r}},body:f({},n)});case 3:if(s=(i=e.sent).data,!(o=i.error)){e.next=8;break}throw o;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=(0,i.Z)(e,h),o=(0,c.NL)();return(0,l.D)(function(e){return function(e){return m.apply(this,arguments)}(e)},f({onSuccess:function(e,r,n){return(0,s.Z)(a().mark(function i(){var s;return a().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s=r.projectRef,i.next=3,Promise.all([o.invalidateQueries(p.o.authConfig(s))]);case 3:return i.next=5,null==t?void 0:t(e,r,n);case 5:case"end":return i.stop()}},i)}))()},onError:function(e,t,n){return(0,s.Z)(a().mark(function i(){return a().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===r?u.ZP.error("Failed to update auth configuration: ".concat(e.message)):r(e,t,n);case 1:case"end":return i.stop()}},i)}))()}},n))}},58951:function(e,t,r){var n=r(2784),i=r(13980),s=r.n(i);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var a=(0,n.forwardRef)(function(e,t){var r=e.color,i=e.size,s=void 0===i?24:i,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["color","size"]);return n.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),n.createElement("polyline",{points:"18 15 12 9 6 15"}))});a.propTypes={color:s().string,size:s().oneOfType([s().string,s().number])},a.displayName="ChevronUp",t.Z=a}}]);